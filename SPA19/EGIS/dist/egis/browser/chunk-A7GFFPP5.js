import"./chunk-F5X5MWHG.js";import{a as It,b as Dt,c as F,e as Et}from"./chunk-2IGJZFV7.js";import{a as mt,b as lt,c as pt,e as ct,h as dt}from"./chunk-KGOMAVQY.js";import{a as k,b as st,c as ft,e as ut,f as gt,h as Ct,i as yt,k as _t,l as bt,n as vt,o as ht,p as Mt,q as xt}from"./chunk-NFABPVPM.js";import{a as St}from"./chunk-WXYTA3LY.js";import{a as wt}from"./chunk-IF4M6L7M.js";import"./chunk-ECBSDO4K.js";import{a as it,b as nt}from"./chunk-DQWGBFJK.js";import"./chunk-MS4AQ6UA.js";import{a as at,b as rt}from"./chunk-LB6LRJVS.js";import{f as ot}from"./chunk-YBNMVR6Q.js";import{a as Z,b as I,c as D}from"./chunk-AWMIQM5V.js";import{c as H}from"./chunk-FE5V2QVG.js";import"./chunk-O27SARHL.js";import"./chunk-3RK6DDJD.js";import"./chunk-SGYCFQGT.js";import"./chunk-HSUA2CKH.js";import"./chunk-TMATL23G.js";import{b as B,g as G,h as $,ha as E,ia as tt,m as L,oa as O,p as Y,pa as et,q as J,s as K,ta as P,ua as T,v as W,x as X}from"./chunk-FPYKYBTQ.js";import{Db as a,Eb as n,Fb as u,Gb as _,Hb as b,Jb as R,Jc as z,Kc as A,Lb as f,Mb as w,Qb as v,Rb as h,Rc as Q,Sb as M,Vb as q,Wb as r,Xb as N,Ya as l,Yb as g,bb as d,db as V,dc as j,ib as S,ka as C,la as y,nb as c,ub as p}from"./chunk-NKHI3LCY.js";function Nt(t,e){t&1&&(a(0,"mat-error"),r(1,"City Name is required"),n())}function Ft(t,e){if(t&1&&(a(0,"mat-option",13),r(1),n()),t&2){let o=e.$implicit;p("value",o.id),l(),N(o.provinceName)}}function Vt(t,e){t&1&&(a(0,"mat-error"),r(1,"Province is required"),n())}function qt(t,e){t&1&&(a(0,"mat-error"),r(1,"Version is required"),n())}var U=class t{constructor(e,o,i,m){this.fb=e;this.dialogRef=o;this.data=i;this.provinceService=m;this.isEditMode=!!i.id,this.form=this.fb.group({id:[i.id||null],cityName:[i.cityName||"",[]],provinceId:[i.provinceId||null,[]]})}form;isEditMode;provinces=[];ngOnInit(){this.provinceService.getProvinces().subscribe(e=>{this.provinces=e})}onSubmit(){this.form.valid&&(console.log("Form submitted:",this.form.value),this.dialogRef.close(this.form.value))}onCancel(){this.dialogRef.close()}static \u0275fac=function(o){return new(o||t)(d(W),d(mt),d(lt),d(wt))};static \u0275cmp=S({type:t,selectors:[["app-user-city-dialog"]],decls:26,vars:8,consts:[[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"full-width"],["matInput","","formControlName","cityName","required",""],[4,"ngIf"],["formControlName","provinceId","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","version","required",""],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"],[3,"value"]],template:function(o,i){if(o&1&&(a(0,"div",0)(1,"h2",1),r(2),n(),a(3,"form",2),f("ngSubmit",function(){return i.onSubmit()}),a(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),r(7,"City Name"),n(),u(8,"input",5),c(9,Nt,2,0,"mat-error",6),n(),a(10,"mat-form-field",4)(11,"mat-label"),r(12,"Province"),n(),a(13,"mat-select",7),c(14,Ft,2,2,"mat-option",8),n(),c(15,Vt,2,0,"mat-error",6),n(),a(16,"mat-form-field",4)(17,"mat-label"),r(18,"Version"),n(),u(19,"input",9),c(20,qt,2,0,"mat-error",6),n()(),a(21,"div",10)(22,"button",11),f("click",function(){return i.onCancel()}),r(23,"Cancel"),n(),a(24,"button",12),r(25),n()()()()),o&2){let m,s,x;l(2),g("",i.isEditMode?"Edit":"Add"," App"),l(),p("formGroup",i.form),l(6),p("ngIf",(m=i.form.get("cityName"))==null?null:m.hasError("required")),l(5),p("ngForOf",i.provinces),l(),p("ngIf",(s=i.form.get("provinceId"))==null?null:s.hasError("required")),l(5),p("ngIf",(x=i.form.get("version"))==null?null:x.hasError("required")),l(4),p("disabled",!i.form.valid),l(),N(i.isEditMode?"Update":"Create")}},dependencies:[Q,z,A,T,P,O,E,tt,et,D,I,dt,ct,rt,at,ot,X,L,B,G,$,K,Y,J],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px;background:transparent!important;box-shadow:none!important}.full-width[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.dialog-actions[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end;gap:12px}  .mat-dialog-container{background:#ffffff80!important;box-shadow:0 8px 32px #0000002e;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}  .mat-form-field-appearance-fill .mat-form-field-flex,   .mat-form-field-appearance-fill .mat-form-field-infix,   .mat-form-field-appearance-fill .mat-form-field-outline,   .mat-form-field-wrapper,   .mat-form-field-flex,   .mat-form-field-infix,   .mat-input-element,   .mat-select-trigger,   .mat-select-value,   .mat-select,   input.mat-input-element,   textarea.mat-input-element{background:transparent!important;box-shadow:none!important}"]})};var jt=["dynamicComponentContainer"],zt=()=>[5,10,25,100];function At(t,e){t&1&&(a(0,"th",20),r(1," Id "),n())}function Qt(t,e){if(t&1&&(a(0,"td",21),r(1),n()),t&2){let o=e.$implicit;l(),g(" ",o.id," ")}}function Ht(t,e){t&1&&(a(0,"th",20),r(1," City Name "),n())}function Bt(t,e){if(t&1&&(a(0,"td",21),r(1),n()),t&2){let o=e.$implicit;l(),g(" ",o.cityName," ")}}function Gt(t,e){t&1&&(a(0,"th",20),r(1," Province "),n())}function $t(t,e){if(t&1&&(a(0,"td",21),r(1),n()),t&2){let o=e.$implicit;l(),g(" ",o.provinceId," ")}}function Lt(t,e){t&1&&(a(0,"th",22),r(1," Action "),n())}function Yt(t,e){if(t&1){let o=R();a(0,"td",23)(1,"button",24),f("click",function(){let m=C(o).$implicit,s=w();return y(s.openDialog(m))}),a(2,"mat-icon"),r(3,"edit"),n()(),a(4,"button",25),f("click",function(){let m=C(o).$implicit,s=w();return y(s.deleteCity(m))}),a(5,"mat-icon"),r(6,"delete"),n()()()}}function Jt(t,e){t&1&&u(0,"tr",26)}function Kt(t,e){t&1&&u(0,"tr",27)}function Wt(t,e){if(t&1&&(a(0,"tr",28)(1,"td",29),r(2),n()()),t&2){w();let o=q(13);l(2),g('No data matching the filter "',o.value,'"')}}var Ot=class t{constructor(e,o,i){this.router=e;this.cityService=o;this.dialog=i}cities=[];displayedColumns=["cityName","provinceId","actions"];dataSource;paginator;sort;table;container;ngOnInit(){this.loadCities()}loadCities(){this.cityService.getCities().subscribe(e=>{this.dataSource=new xt(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(e){let o=e.target.value;this.dataSource.filter=o.trim().toLocaleLowerCase()}openDialog(e){this.dialog.open(U,{data:e||{}}).afterClosed().subscribe(i=>{i&&(i.id?this.cityService.updateCity(i).subscribe(()=>{this.loadCities()}):this.cityService.createCity(i).subscribe(()=>{this.loadCities()}))})}deleteCity(e){confirm(`Delete city ${e.cityName}?`)&&this.cityService.deleteCity(e.id).subscribe(()=>this.loadCities())}static \u0275fac=function(o){return new(o||t)(d(H),d(St),d(pt))};static \u0275cmp=S({type:t,selectors:[["app-user-city"]],viewQuery:function(o,i){if(o&1&&(v(F,5),v(Et,5),v(k,5),v(jt,5,V)),o&2){let m;h(m=M())&&(i.paginator=m.first),h(m=M())&&(i.sort=m.first),h(m=M())&&(i.table=m.first),h(m=M())&&(i.container=m.first)}},decls:32,vars:5,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",1,"load-batch-btn",3,"click"],[1,"full-width"],["matInput","","placeholder","Search city...",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cityName"],["matColumnDef","provinceId"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of cities",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary","matTooltip","Edit City",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete City",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(o,i){if(o&1){let m=R();a(0,"div",1)(1,"div")(2,"h1",2),r(3,"Cities"),n(),r(4," \xA0 "),a(5,"button",3),f("click",function(){return C(m),y(i.openDialog())}),r(6,"Add City"),n()(),r(7," \xA0 "),a(8,"div")(9,"mat-form-field",4)(10,"mat-label"),r(11,"Filter"),n(),a(12,"input",5,0),f("keyup",function(x){return C(m),y(i.applyFilter(x))}),n()()(),a(14,"div",6)(15,"table",7),_(16,8),c(17,At,2,0,"th",9)(18,Qt,2,1,"td",10),b(),_(19,11),c(20,Ht,2,0,"th",9)(21,Bt,2,1,"td",10),b(),_(22,12),c(23,Gt,2,0,"th",9)(24,$t,2,1,"td",10),b(),_(25,13),c(26,Lt,2,0,"th",14)(27,Yt,7,0,"td",15),b(),c(28,Jt,1,0,"tr",16)(29,Kt,1,0,"tr",17)(30,Wt,3,1,"tr",18),n(),u(31,"mat-paginator",19),n()()}o&2&&(l(15),p("dataSource",i.dataSource),l(13),p("matHeaderRowDef",i.displayedColumns),l(),p("matRowDefColumns",i.displayedColumns),l(2),p("pageSizeOptions",j(4,zt)))},dependencies:[T,P,O,E,Mt,k,ft,yt,ut,st,_t,gt,Ct,bt,vt,ht,nt,it,F,D,I,Z,Dt,It],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px;border:1.5px solid #e0e0e0;border-radius:10px;padding:24px;background:transparent;box-shadow:none}.load-batch-btn[_ngcontent-%COMP%]{height:50px;min-width:120px;margin-left:8px;background:#4169e1!important;color:#fff!important;font-weight:600;font-size:16px;border-radius:8px;box-shadow:0 2px 8px #4169e126;transition:background .2s,box-shadow .2s,transform .1s;letter-spacing:.5px;border:none;display:flex;align-items:left;justify-content:center;padding:0 24px;margin-bottom:24px}.load-batch-btn[_ngcontent-%COMP%]:hover, .load-batch-btn[_ngcontent-%COMP%]:focus{background:#274bb5!important;box-shadow:0 4px 16px #4169e140;transform:translateY(-2px) scale(1.03)}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{background:transparent!important}.mat-elevation-z8[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important}  .mat-paginator,   .mat-paginator-container,   .mat-paginator-outer-container,   .mat-paginator-range-actions,   .mat-paginator-page-size,   .mat-paginator-page-size-label,   .mat-paginator-range-label,   .mat-paginator-navigation-previous,   .mat-paginator-navigation-next,   .mat-paginator-page-size-select,   .mat-paginator-page-size-select .mat-select-trigger,   .mat-paginator-page-size-select .mat-select-value,   .paginator-row,   div[style*=background],   .mat-mdc-paginator,   .mat-mdc-paginator-container,   .mat-mdc-paginator-range-actions{background:transparent!important;box-shadow:none!important}  .mat-paginator,   .mat-paginator-container,   .mat-paginator-outer-container,   .mat-mdc-paginator,   .mat-mdc-paginator-container{background:transparent!important;box-shadow:none!important;border:none!important}"]})};export{Ot as UserCityComponent};
