import{a as Te}from"./chunk-GRYVUB4F.js";import{h as Ee}from"./chunk-QPQHFBXO.js";import{d as Ie}from"./chunk-DBLGM7RZ.js";import{a as xe,b as we,c as ye,e as De,h as Ue}from"./chunk-V5IDTODI.js";import"./chunk-F5X5MWHG.js";import"./chunk-MS4AQ6UA.js";import{a as he,b as Me,c as P,e as ve,f as Se,g as be}from"./chunk-4QXU7Q3Z.js";import{G as _e,I as ge,J as Ce,e as N,f as oe,g as re,i as ne,j as ae,l as le,m as me,o as se,p as pe,r as de,s as ce,t as ue,u as fe}from"./chunk-MYHFZ2D2.js";import"./chunk-3RK6DDJD.js";import{$ as D,aa as ee,b as G,g as L,ga as U,h as z,ka as te,l as J,la as E,ma as I,n as K,o as W,p as X,pa as ie,q as Y,ra as T,s as Z,sa as R}from"./chunk-KTJ4FNCK.js";import{c as $}from"./chunk-XHFMZJAH.js";import"./chunk-IKLMD3RG.js";import{m as Q,n as B,t as H}from"./chunk-T6TR6RQX.js";import{Bb as o,Cb as i,Db as c,Eb as g,Fb as C,Hb as O,Lb as _,Mb as y,Qb as v,Rb as S,Sb as b,Va as l,Vb as q,Wb as a,Xb as A,Yb as d,_a as f,ab as k,dc as j,fb as w,ia as h,ja as M,lb as s,sb as p}from"./chunk-5MRHDFKX.js";function qe(e,t){e&1&&(o(0,"mat-error"),a(1,"User Name is required"),i())}function Ae(e,t){e&1&&(o(0,"mat-error"),a(1,"Password is required"),i())}function je(e,t){if(e&1&&(o(0,"mat-option",15),a(1),i()),e&2){let n=t.$implicit;p("value",n.name),l(),d(" ",n.name," ")}}function Qe(e,t){e&1&&(o(0,"mat-error"),a(1,"Email is required"),i())}function Be(e,t){e&1&&(o(0,"mat-error"),a(1,"Phone is required"),i())}var F=class e{constructor(t,n,r){this.fb=t;this.dialogRef=n;this.data=r;this.isEditMode=!!r.userId,this.form=this.fb.group({userName:[r.userName||"",[]],password:[r.password||"",[]],role:[r.role||"",[]],email:[r.email||"",[]],phone:[r.phone||"",[]]})}form;isEditMode;userRolesOptions=[{name:"Administrator"},{name:"Owner"},{name:"Payer"},{name:"Assessor"},{name:"Verifier"},{name:"Collector"},{name:"Teller"},{name:"Auditor"},{name:"Approver"}];onSubmit(){this.form.valid&&(console.log("Form submitted:",this.form.value),this.dialogRef.close(this.form.value))}onCancel(){this.dialogRef.close()}static \u0275fac=function(n){return new(n||e)(f(Y),f(xe),f(we))};static \u0275cmp=w({type:e,selectors:[["app-users-dialog"]],decls:35,vars:9,consts:[[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"full-width"],["matInput","","formControlName","userName","required",""],[4,"ngIf"],["matInput","","type","password","formControlName","password","required",""],["formControlName","role"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","email","formControlName","email","required",""],["matInput","","formControlName","phone","required",""],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"],[3,"value"]],template:function(n,r){if(n&1&&(o(0,"div",0)(1,"h2",1),a(2),i(),o(3,"form",2),_("ngSubmit",function(){return r.onSubmit()}),o(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),a(7,"User Name"),i(),c(8,"input",5),s(9,qe,2,0,"mat-error",6),i(),o(10,"mat-form-field",4)(11,"mat-label"),a(12,"Password"),i(),c(13,"input",7),s(14,Ae,2,0,"mat-error",6),i(),o(15,"mat-form-field",4)(16,"mat-label"),a(17,"User Roles"),i(),o(18,"mat-select",8),s(19,je,2,2,"mat-option",9),i()(),o(20,"mat-form-field",4)(21,"mat-label"),a(22,"Email"),i(),c(23,"input",10),s(24,Qe,2,0,"mat-error",6),i(),o(25,"mat-form-field",4)(26,"mat-label"),a(27,"Phone"),i(),c(28,"input",11),s(29,Be,2,0,"mat-error",6),i()(),o(30,"div",12)(31,"button",13),_("click",function(){return r.onCancel()}),a(32,"Cancel"),i(),o(33,"button",14),a(34),i()()()()),n&2){let m,u,x,V;l(2),d("",r.isEditMode?"Edit":"Add"," Batch Receipt"),l(),p("formGroup",r.form),l(6),p("ngIf",(m=r.form.get("userName"))==null?null:m.hasError("required")),l(5),p("ngIf",(u=r.form.get("password"))==null?null:u.hasError("required")),l(5),p("ngForOf",r.userRolesOptions),l(5),p("ngIf",(x=r.form.get("email"))==null?null:x.hasError("required")),l(5),p("ngIf",(V=r.form.get("phone"))==null?null:V.hasError("required")),l(4),p("disabled",!r.form.valid),l(),A(r.isEditMode?"Update":"Create")}},dependencies:[H,Q,B,Z,J,G,L,z,X,K,W,I,E,U,D,ee,Ee,te,R,T,Ue,De,Ie,Ce,ge,_e],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px}.full-width[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.dialog-actions[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end;gap:12px}"]})};var He=["dynamicComponentContainer"],$e=()=>[5,10,25,100];function Ge(e,t){e&1&&(o(0,"th",22),a(1," ID "),i())}function Le(e,t){if(e&1&&(o(0,"td",23),a(1),i()),e&2){let n=t.$implicit;l(),d(" ",n.userId," ")}}function ze(e,t){e&1&&(o(0,"th",22),a(1," User Name "),i())}function Je(e,t){if(e&1&&(o(0,"td",23),a(1),i()),e&2){let n=t.$implicit;l(),d(" ",n.userName," ")}}function Ke(e,t){e&1&&(o(0,"th",22),a(1," Email "),i())}function We(e,t){if(e&1&&(o(0,"td",23),a(1),i()),e&2){let n=t.$implicit;l(),d(" ",n.email," ")}}function Xe(e,t){e&1&&(o(0,"th",22),a(1," Role "),i())}function Ye(e,t){if(e&1&&(o(0,"td",23),a(1),i()),e&2){let n=t.$implicit;l(),d(" ",n.role," ")}}function Ze(e,t){e&1&&(o(0,"th",22),a(1," Phone "),i())}function et(e,t){if(e&1&&(o(0,"td",23),a(1),i()),e&2){let n=t.$implicit;l(),d(" ",n.phone," ")}}function tt(e,t){e&1&&(o(0,"th",24),a(1," Action "),i())}function it(e,t){if(e&1){let n=O();o(0,"td",25)(1,"button",26),_("click",function(){let m=h(n).$implicit,u=y();return M(u.openDialog(m))}),o(2,"mat-icon"),a(3,"edit"),i()(),o(4,"button",27),_("click",function(){let m=h(n).$implicit,u=y();return M(u.deleteUsers(m.id))}),o(5,"mat-icon"),a(6,"delete"),i()()()}}function ot(e,t){e&1&&c(0,"tr",28)}function rt(e,t){e&1&&c(0,"tr",29)}function nt(e,t){if(e&1&&(o(0,"tr",30)(1,"td",31),a(2),i()()),e&2){y();let n=q(11);l(2),d('No data matching the filter "',n.value,'"')}}var Re=class e{constructor(t,n,r){this.router=t;this.usersService=n;this.dialog=r}showSubCode=!1;selectedMasterCode;selectedDescription;displayedColumns=["userName","role","email","phone","actions"];dataSource;paginator;sort;table;container;ngOnInit(){this.loadUsers()}loadUsers(){this.usersService.getAllUsers().subscribe(t=>{this.dataSource=new fe(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(t){let n=t.target.value;this.dataSource.filter=n.trim().toLocaleLowerCase()}openDialog(t){this.dialog.open(F,{data:t||{}}).afterClosed().subscribe(r=>{r&&(r.id?this.usersService.updateUser(r).subscribe(()=>{this.loadUsers()}):this.usersService.createUser(r).subscribe(()=>{this.loadUsers()}))})}deleteUsers(t){confirm("Are you sure you want to delete this master table code?")&&this.usersService.deleteUser(t).subscribe(()=>{this.loadUsers()})}static \u0275fac=function(n){return new(n||e)(f($),f(Te),f(ye))};static \u0275cmp=w({type:e,selectors:[["app-users"]],viewQuery:function(n,r){if(n&1&&(v(P,5),v(ve,5),v(N,5),v(He,5,k)),n&2){let m;S(m=b())&&(r.paginator=m.first),S(m=b())&&(r.sort=m.first),S(m=b())&&(r.table=m.first),S(m=b())&&(r.container=m.first)}},decls:36,vars:5,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",3,"click"],[1,"full-width"],["matInput","","placeholder","Search user...",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","userId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userName"],["matColumnDef","email"],["matColumnDef","role"],["matColumnDef","phone"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary","matTooltip","Edit Master Code",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete Master Code",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(n,r){if(n&1){let m=O();o(0,"div",1)(1,"div")(2,"h1",2),a(3,"Users"),i(),o(4,"button",3),_("click",function(){return h(m),M(r.openDialog())}),a(5,"Add Users"),i()(),o(6,"div")(7,"mat-form-field",4)(8,"mat-label"),a(9,"Filter"),i(),o(10,"input",5,0),_("keyup",function(x){return h(m),M(r.applyFilter(x))}),i()()(),o(12,"div",6)(13,"table",7),g(14,8),s(15,Ge,2,0,"th",9)(16,Le,2,1,"td",10),C(),g(17,11),s(18,ze,2,0,"th",9)(19,Je,2,1,"td",10),C(),g(20,12),s(21,Ke,2,0,"th",9)(22,We,2,1,"td",10),C(),g(23,13),s(24,Xe,2,0,"th",9)(25,Ye,2,1,"td",10),C(),g(26,14),s(27,Ze,2,0,"th",9)(28,et,2,1,"td",10),C(),g(29,15),s(30,tt,2,0,"th",16)(31,it,7,0,"td",17),C(),s(32,ot,1,0,"tr",18)(33,rt,1,0,"tr",19)(34,nt,3,1,"tr",20),i(),c(35,"mat-paginator",21),i()()}n&2&&(l(13),p("dataSource",r.dataSource),l(19),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns),l(2),p("pageSizeOptions",j(4,$e)))},dependencies:[U,I,E,D,ue,N,re,me,ne,oe,se,ae,le,pe,de,ce,be,Se,P,R,T,ie,Me,he],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}"]})};export{Re as UsersComponent};
