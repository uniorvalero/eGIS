import{a as ve}from"./chunk-V2VMPBXG.js";import{a as he,b as be,c as Se}from"./chunk-JZMA4RSN.js";import{b as te}from"./chunk-XND27LNV.js";import"./chunk-F5X5MWHG.js";import{a as fe,b as Ce,c as k,e as Me,f as _e,g as ge}from"./chunk-T6XAED5K.js";import{e as T,f as ie,g as oe,i as re,j as ne,l as ae,m as le,o as me,p as de,r as se,s as ce,t as pe,u as ue}from"./chunk-IFJ4ZPCK.js";import"./chunk-3RK6DDJD.js";import{$ as D,aa as W,b as H,d as V,fa as x,g as G,h as B,ja as X,ka as E,l as L,la as I,n as $,o as z,oa as Y,p as U,q as J,qa as Z,ra as ee,s as K}from"./chunk-6Q2Z7QGE.js";import{c as A}from"./chunk-HZX2JZPO.js";import"./chunk-ZJWXBZTA.js";import{n as j,s as Q}from"./chunk-AXBZNO4R.js";import{Bb as r,Cb as n,Db as f,Eb as g,Fb as h,Hb as F,Lb as p,Mb as b,Qb as S,Rb as v,Sb as w,Va as m,Vb as O,Wb as l,Xb as q,Yb as C,_a as u,ab as N,dc as P,fb as y,ia as M,ja as _,lb as c,sb as s}from"./chunk-KFEO7OMD.js";function Re(e,t){e&1&&(r(0,"mat-error"),l(1,"Code is required"),n())}function Fe(e,t){e&1&&(r(0,"mat-error"),l(1,"Description is required"),n())}var R=class e{constructor(t,o,i){this.fb=t;this.dialogRef=o;this.data=i;this.isEditMode=!!i.id,this.form=this.fb.group({id:[i.id],code:[i.code||"",[V.required]],description:[i.description||"",[V.required]]})}form;isEditMode;onSubmit(){this.form.valid&&this.dialogRef.close(this.form.value)}onCancel(){this.dialogRef.close()}static \u0275fac=function(o){return new(o||e)(u(J),u(he),u(be))};static \u0275cmp=y({type:e,selectors:[["app-master-code-dialog"]],decls:19,vars:6,consts:[[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"full-width"],["matInput","","formControlName","code","required",""],[4,"ngIf"],["matInput","","formControlName","description","required",""],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"]],template:function(o,i){if(o&1&&(r(0,"div",0)(1,"h2",1),l(2),n(),r(3,"form",2),p("ngSubmit",function(){return i.onSubmit()}),r(4,"mat-form-field",3)(5,"mat-label"),l(6," Code"),n(),f(7,"input",4),c(8,Re,2,0,"mat-error",5),n(),r(9,"mat-form-field",3)(10,"mat-label"),l(11,"Description"),n(),f(12,"input",6),c(13,Fe,2,0,"mat-error",5),n(),r(14,"div",7)(15,"button",8),p("click",function(){return i.onCancel()}),l(16,"Cancel"),n(),r(17,"button",9),l(18),n()()()()),o&2){let a,d;m(2),C("",i.isEditMode?"Edit":"Add"," Master Table Code"),m(),s("formGroup",i.form),m(5),s("ngIf",(a=i.form.get("code"))==null?null:a.hasError("required")),m(5),s("ngIf",(d=i.form.get("description"))==null?null:d.hasError("required")),m(4),s("disabled",!i.form.valid),m(),q(i.isEditMode?"Update":"Create")}},dependencies:[K,L,H,G,B,U,$,z,X,x,D,W,Q,j,I,E,te],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px}.full-width[_ngcontent-%COMP%]{width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:8px}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}"]})};var Ve=["dynamicComponentContainer"],ke=()=>[5,10,25,100];function Ne(e,t){e&1&&(r(0,"th",20),l(1," ID "),n())}function Oe(e,t){if(e&1&&(r(0,"td",21),l(1),n()),e&2){let o=t.$implicit;m(),C(" ",o.id," ")}}function qe(e,t){e&1&&(r(0,"th",20),l(1," Code "),n())}function Pe(e,t){if(e&1&&(r(0,"td",21),l(1),n()),e&2){let o=t.$implicit;m(),C(" ",o.code," ")}}function je(e,t){e&1&&(r(0,"th",20),l(1," Description "),n())}function Qe(e,t){if(e&1&&(r(0,"td",21),l(1),n()),e&2){let o=t.$implicit;m(),C(" ",o.description," ")}}function Ae(e,t){e&1&&(r(0,"th",22),l(1," Action "),n())}function He(e,t){if(e&1){let o=F();r(0,"td",23)(1,"button",24),p("click",function(){let a=M(o).$implicit,d=b();return _(d.openMasterSubCode(a.code,a.description))}),r(2,"mat-icon"),l(3,"open_in_new"),n()(),r(4,"button",25),p("click",function(){let a=M(o).$implicit,d=b();return _(d.openDialog(a))}),r(5,"mat-icon"),l(6,"edit"),n()(),r(7,"button",26),p("click",function(){let a=M(o).$implicit,d=b();return _(d.deleteMasterCode(a.id))}),r(8,"mat-icon"),l(9,"delete"),n()()()}}function Ge(e,t){e&1&&f(0,"tr",27)}function Be(e,t){e&1&&f(0,"tr",28)}function Le(e,t){if(e&1&&(r(0,"tr",29)(1,"td",30),l(2),n()()),e&2){b();let o=O(11);m(2),C('No data matching the filter "',o.value,'"')}}var we=class e{constructor(t,o,i){this.router=t;this.mastercodeService=o;this.dialog=i}showSubCode=!1;selectedMasterCode;selectedDescription;displayedColumns=["id","code","description","actions"];dataSource;paginator;sort;table;container;ngOnInit(){this.loadMasterCode()}loadMasterCode(){this.mastercodeService.getMasteCodes().subscribe(t=>{this.dataSource=new ue(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(t){let o=t.target.value;this.dataSource.filter=o.trim().toLocaleLowerCase()}openDialog(t){this.dialog.open(R,{data:t||{}}).afterClosed().subscribe(i=>{i&&(i.id?this.mastercodeService.updateMasterCode(i).subscribe(()=>{this.loadMasterCode()}):this.mastercodeService.createMasterCode(i).subscribe(()=>{this.loadMasterCode()}))})}deleteMasterCode(t){confirm("Are you sure you want to delete this master table code?")&&this.mastercodeService.deleteMasterCode(t).subscribe(()=>{this.loadMasterCode()})}openMasterSubCode(t,o){this.router.navigate(["/mainlayout/mastersubcode",t,o]),this.selectedMasterCode=t,this.selectedDescription=o,this.showSubCode=!0}static \u0275fac=function(o){return new(o||e)(u(A),u(ve),u(Se))};static \u0275cmp=y({type:e,selectors:[["app-master-code"]],viewQuery:function(o,i){if(o&1&&(S(k,5),S(Me,5),S(T,5),S(Ve,5,N)),o&2){let a;v(a=w())&&(i.paginator=a.first),v(a=w())&&(i.sort=a.first),v(a=w())&&(i.table=a.first),v(a=w())&&(i.container=a.first)}},decls:30,vars:5,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",3,"click"],[1,"full-width"],["matInput","","placeholder","Search master code...",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","description"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary","matTooltip","Open Sub Codes",3,"click"],["mat-icon-button","","color","primary","matTooltip","Edit Master Code",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete Master Code",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(o,i){if(o&1){let a=F();r(0,"div",1)(1,"div")(2,"h1",2),l(3,"Master Table Code"),n(),r(4,"button",3),p("click",function(){return M(a),_(i.openDialog())}),l(5,"Add Master Code"),n()(),r(6,"div")(7,"mat-form-field",4)(8,"mat-label"),l(9,"Filter"),n(),r(10,"input",5,0),p("keyup",function(ye){return M(a),_(i.applyFilter(ye))}),n()()(),r(12,"div",6)(13,"table",7),g(14,8),c(15,Ne,2,0,"th",9)(16,Oe,2,1,"td",10),h(),g(17,11),c(18,qe,2,0,"th",9)(19,Pe,2,1,"td",10),h(),g(20,12),c(21,je,2,0,"th",9)(22,Qe,2,1,"td",10),h(),g(23,13),c(24,Ae,2,0,"th",14)(25,He,10,0,"td",15),h(),c(26,Ge,1,0,"tr",16)(27,Be,1,0,"tr",17)(28,Le,3,1,"tr",18),n(),f(29,"mat-paginator",19),n()()}o&2&&(m(13),s("dataSource",i.dataSource),m(13),s("matHeaderRowDef",i.displayedColumns),m(),s("matRowDefColumns",i.displayedColumns),m(2),s("pageSizeOptions",P(4,ke)))},dependencies:[x,I,E,D,pe,T,oe,le,re,ie,me,ne,ae,de,se,ce,ge,_e,k,ee,Z,Y,Ce,fe],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}"]})};export{we as MasterCodeComponent};
