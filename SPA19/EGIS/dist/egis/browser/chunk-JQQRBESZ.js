import{a as Se,b as Me,c as De}from"./chunk-JZMA4RSN.js";import{b as le}from"./chunk-XND27LNV.js";import{c as q,e as ge,f as Re,g as be,h as xe}from"./chunk-T6XAED5K.js";import{e as F,f as de,g as me,i as ce,j as ue,l as pe,m as se,o as fe,p as he,r as Ce,s as ve,t as _e,u as P}from"./chunk-IFJ4ZPCK.js";import"./chunk-3RK6DDJD.js";import{$ as y,aa as ie,b as U,d as w,fa as I,g as J,h as K,ja as oe,ka as E,l as W,la as T,n as X,o as Y,oa as ne,p as Z,q as ee,qa as re,ra as ae,s as te}from"./chunk-6Q2Z7QGE.js";import{a as B,c as z}from"./chunk-HZX2JZPO.js";import{a as Q}from"./chunk-ZJWXBZTA.js";import{n as $,s as G}from"./chunk-AXBZNO4R.js";import{$ as j,Bb as r,Cb as n,Db as f,Eb as _,Fb as g,Hb as V,Lb as s,Mb as S,Qb as M,Rb as D,Sb as x,Va as d,Vb as A,W as N,Wb as a,Xb as H,Yb as h,_a as p,dc as L,fb as b,ia as C,ja as v,lb as m,sb as c}from"./chunk-KFEO7OMD.js";function Oe(t,e){t&1&&(r(0,"mat-error"),a(1,"Code is required"),n())}function ke(t,e){t&1&&(r(0,"mat-error"),a(1,"Amount is required"),n())}function Ve(t,e){t&1&&(r(0,"mat-error"),a(1,"Description is required"),n())}var O=class t{constructor(e,i,o){this.fb=e;this.dialogRef=i;this.data=o;this.isEditMode=!!o.id,this.form=this.fb.group({id:[o.id],code:[o.code||"",[w.required]],amount:[o.amount||"",[w.required]],description:[o.description||"",[w.required]]})}form;isEditMode;onSubmit(){this.form.valid&&this.dialogRef.close(this.form.value)}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(p(ee),p(Se),p(Me))};static \u0275cmp=b({type:t,selectors:[["app-revenuecodechild-dialog"]],decls:24,vars:7,consts:[[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"full-width"],["matInput","","formControlName","code","required",""],[4,"ngIf"],["matInput","","formControlName","amount","required",""],["matInput","","formControlName","description","required",""],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"]],template:function(i,o){if(i&1&&(r(0,"div",0)(1,"h2",1),a(2),n(),r(3,"form",2),s("ngSubmit",function(){return o.onSubmit()}),r(4,"mat-form-field",3)(5,"mat-label"),a(6," Code"),n(),f(7,"input",4),m(8,Oe,2,0,"mat-error",5),n(),r(9,"mat-form-field",3)(10,"mat-label"),a(11,"Amount "),n(),f(12,"input",6),m(13,ke,2,0,"mat-error",5),n(),r(14,"mat-form-field",3)(15,"mat-label"),a(16,"Description"),n(),f(17,"input",7),m(18,Ve,2,0,"mat-error",5),n(),r(19,"div",8)(20,"button",9),s("click",function(){return o.onCancel()}),a(21,"Cancel"),n(),r(22,"button",10),a(23),n()()()()),i&2){let l,u,R;d(2),h("",o.isEditMode?"Edit":"Add"," Revenue Code Child"),d(),c("formGroup",o.form),d(5),c("ngIf",(l=o.form.get("code"))==null?null:l.hasError("required")),d(5),c("ngIf",(u=o.form.get("amount"))==null?null:u.hasError("required")),d(5),c("ngIf",(R=o.form.get("description"))==null?null:R.hasError("required")),d(4),c("disabled",!o.form.valid),d(),H(o.isEditMode?"Update":"Create")}},dependencies:[te,W,U,J,K,Z,X,Y,oe,I,y,ie,G,$,T,E,le],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px}.full-width[_ngcontent-%COMP%]{width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:8px}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}"]})};var k=class t{constructor(e){this.http=e}apibaseurl=xe.apibaseURL;getRevenueCodeChildLst(e){let i={code:e};return this.http.get(this.apibaseurl+"/RevenueCodeChild/GetCode",{params:i})}updateRevenueCodeChild(e){return this.http.put(`${this.apibaseurl+"/RevenueCodeChild"}/${e.id}`,e)}createRevenueCodeChild(e){return e.id=0,this.http.post(this.apibaseurl+"/RevenueCodeChild/Create",e)}deleteRevenueCodeChild(e){return this.http.delete(`${this.apibaseurl+"/RevenueCodeChild"}/${e}`)}static \u0275fac=function(i){return new(i||t)(j(Q))};static \u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"})};var qe=()=>[5,10,25,100];function Ne(t,e){t&1&&(r(0,"th",21),a(1," ID "),n())}function je(t,e){if(t&1&&(r(0,"td",22),a(1),n()),t&2){let i=e.$implicit;d(),h(" ",i.id," ")}}function Ae(t,e){t&1&&(r(0,"th",21),a(1," Code "),n())}function He(t,e){if(t&1&&(r(0,"td",22),a(1),n()),t&2){let i=e.$implicit;d(),h(" ",i.code," ")}}function Le(t,e){t&1&&(r(0,"th",21),a(1," Amount "),n())}function $e(t,e){if(t&1&&(r(0,"td",22),a(1),n()),t&2){let i=e.$implicit;d(),h(" ",i.amount," ")}}function Ge(t,e){t&1&&(r(0,"th",21),a(1," Description "),n())}function Qe(t,e){if(t&1&&(r(0,"td",22),a(1),n()),t&2){let i=e.$implicit;d(),h(" ",i.description," ")}}function Be(t,e){t&1&&(r(0,"th",23),a(1," Action "),n())}function ze(t,e){if(t&1){let i=V();r(0,"td",24)(1,"button",25),s("click",function(){let l=C(i).$implicit,u=S();return v(u.openDialog(l))}),r(2,"mat-icon"),a(3,"edit"),n()(),r(4,"button",25),s("click",function(){let l=C(i).$implicit,u=S();return v(u.deleteRevenueCodeChild(l.id))}),r(5,"mat-icon"),a(6,"delete"),n()()()}}function Ue(t,e){t&1&&f(0,"tr",26)}function Je(t,e){t&1&&f(0,"tr",27)}function Ke(t,e){if(t&1&&(r(0,"tr",28)(1,"td",29),a(2),n()()),t&2){S();let i=A(11);d(2),h('No data matching the filter "',i.value,'"')}}var ye=class t{constructor(e,i,o,l){this.revenuecodechildService=e;this.dialog=i;this.router=o;this.route=l}revenueCode;revenueDescription;showSubCode=!1;displayedColumns=["id","code","amount","description","actions"];dataSource;paginator;sort;table;ngOnInit(){this.route.params.subscribe(e=>{this.revenueCode=e.code,this.revenueDescription=e.description,this.revenuecodechildService.getRevenueCodeChildLst(this.revenueCode).subscribe({next:i=>{this.dataSource=new P(i)},error:i=>{console.error("Error fetching master subcodes:",i)}})})}loadRevenueCodeChild(){this.revenuecodechildService.getRevenueCodeChildLst(this.revenueCode).subscribe(e=>{this.dataSource=new P(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(e){let i=e.target.value;this.dataSource.filter=i.trim().toLocaleLowerCase()}openDialog(e){this.dialog.open(O,{data:e||{}}).afterClosed().subscribe(o=>{o&&(o.id?this.revenuecodechildService.updateRevenueCodeChild(o).subscribe(()=>{this.loadRevenueCodeChild()}):this.revenuecodechildService.createRevenueCodeChild(o).subscribe(()=>{this.loadRevenueCodeChild()}))})}deleteRevenueCodeChild(e){confirm("Are you sure you want to delete this revenue code child?")&&this.revenuecodechildService.deleteRevenueCodeChild(e).subscribe(()=>{this.loadRevenueCodeChild()})}goToParent(){this.router.navigate(["/mainlayout/revenuecodeparent"]),this.showSubCode=!0}static \u0275fac=function(i){return new(i||t)(p(k),p(De),p(z),p(B))};static \u0275cmp=b({type:t,selectors:[["app-revenuecodechild"]],viewQuery:function(i,o){if(i&1&&(M(q,5),M(ge,5),M(F,5)),i&2){let l;D(l=x())&&(o.paginator=l.first),D(l=x())&&(o.sort=l.first),D(l=x())&&(o.table=l.first)}},decls:36,vars:5,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",3,"click"],[1,"full-width"],["matInput","","placeholder","Search Revenue code child...",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","amount"],["matColumnDef","description"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,o){if(i&1){let l=V();r(0,"div",1)(1,"div")(2,"h1",2),a(3,"Revenue Code Child"),n(),r(4,"button",3),s("click",function(){return C(l),v(o.openDialog())}),a(5,"Add Revenue Code Child "),n()(),r(6,"div")(7,"mat-form-field",4)(8,"mat-label"),a(9,"Filter"),n(),r(10,"input",5,0),s("keyup",function(R){return C(l),v(o.applyFilter(R))}),n()()(),r(12,"div",6)(13,"table",7),_(14,8),m(15,Ne,2,0,"th",9)(16,je,2,1,"td",10),g(),_(17,11),m(18,Ae,2,0,"th",9)(19,He,2,1,"td",10),g(),_(20,12),m(21,Le,2,0,"th",9)(22,$e,2,1,"td",10),g(),_(23,13),m(24,Ge,2,0,"th",9)(25,Qe,2,1,"td",10),g(),_(26,14),m(27,Be,2,0,"th",15)(28,ze,7,0,"td",16),g(),m(29,Ue,1,0,"tr",17)(30,Je,1,0,"tr",18)(31,Ke,3,1,"tr",19),n(),f(32,"mat-paginator",20),n(),r(33,"div")(34,"button",3),s("click",function(){return C(l),v(o.goToParent())}),a(35,"Go to Parent"),n()()()}i&2&&(d(13),c("dataSource",o.dataSource),d(16),c("matHeaderRowDef",o.displayedColumns),d(),c("matRowDefColumns",o.displayedColumns),d(2),c("pageSizeOptions",L(4,qe)))},dependencies:[I,T,E,y,_e,F,me,se,ce,de,fe,ue,pe,he,Ce,ve,be,Re,q,ae,re,ne],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}"]})};export{ye as RevenuecodechildComponent};
