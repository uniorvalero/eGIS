import{a as De}from"./chunk-W3L6UWDE.js";import{a as O}from"./chunk-UQZSQSYL.js";import"./chunk-F5X5MWHG.js";import{a as Pe,b as we,c as A,e as be}from"./chunk-2IGJZFV7.js";import{a as le,b as me,c as pe,e as ce,h as se}from"./chunk-KGOMAVQY.js";import{a as N,b as de,c as fe,e as ue,f as ye,h as _e,i as Ce,k as Se,l as ge,n as he,o as ve,p as xe,q as Me}from"./chunk-NFABPVPM.js";import{c as ne}from"./chunk-RC2IBETA.js";import"./chunk-SYAC655V.js";import"./chunk-ECBSDO4K.js";import{a as te,b as ie}from"./chunk-DQWGBFJK.js";import"./chunk-MS4AQ6UA.js";import{a as re,b as ae}from"./chunk-LB6LRJVS.js";import{f as oe}from"./chunk-YBNMVR6Q.js";import{a as Y,b as w,c as b}from"./chunk-AWMIQM5V.js";import{c as B}from"./chunk-FE5V2QVG.js";import"./chunk-O27SARHL.js";import"./chunk-3RK6DDJD.js";import{c as Z}from"./chunk-BUEFDGFJ.js";import"./chunk-SGYCFQGT.js";import"./chunk-HSUA2CKH.js";import"./chunk-TMATL23G.js";import{b as H,g as G,h as q,ha as D,m as z,oa as E,p as J,pa as ee,q as K,ta as I,ua as T,v as W,x as X}from"./chunk-FPYKYBTQ.js";import{Db as n,Eb as o,Fb as _,Gb as f,Hb as u,Jb as F,Jc as L,Lb as C,Mb as P,Qb as h,Rb as v,Rc as Q,Sb as x,Vb as U,Wb as a,Xb as $,Ya as l,Yb as c,bb as y,db as k,dc as j,ib as M,ka as S,la as g,nb as p,ub as s,w as V}from"./chunk-NKHI3LCY.js";function Ve(e,t){if(e&1&&(n(0,"mat-option",16),a(1),o()),e&2){let i=t.$implicit;s("value",i.id),l(),c(" ",i.userName," ")}}function ke(e,t){if(e&1&&(n(0,"mat-option",16),a(1),o()),e&2){let i=t.$implicit;s("value",i.name),l(),c(" ",i.name," ")}}function Ue(e,t){if(e&1&&(n(0,"mat-option",16),a(1),o()),e&2){let i=t.$implicit;s("value",i.value),l(),c(" ",i.label," ")}}var R=class e{constructor(t,i,r,m){this.fb=t;this.dialogRef=i;this.data=r;this.usersService=m;this.isEditMode=!!r.propertyId,this.form=this.fb.group({taxDeclarationNo:[r.taxDeclarationNo],ownerId:[null],titleNo:[r.titleNo],classification:[this.clasificationOptions.find(d=>d.name===r.classification)?.name||""],location:[r.location],landArea:[r.landArea],propertyStatus:[r.propertyStatus??!0]}),this.loadOwner()}form;isEditMode;userOwner="owner";users=[];selectedUser=null;clasificationOptions=[{name:"Residential"},{name:"Commercial"},{name:"Industrial"},{name:"Agricultural"}];propertyStatusOptions=[{value:!0,label:"Active"},{value:!1,label:"Inactive"}];loadOwner(){this.usersService.getUserIDName(this.userOwner).subscribe(t=>{this.users=t})}loadClassification(){this.form=this.fb.group({clasificationOptions:[this.data.classification]})}onSelectedOwner(t){let i=this.users.find(r=>r.id===t);this.selectedUser=i||null,this.form.patchValue({ownerId:t})}onSubmit(){this.form.valid&&this.dialogRef.close(this.form.value)}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||e)(y(W),y(le),y(me),y(O))};static \u0275cmp=M({type:e,selectors:[["app-property-dialog"]],decls:41,vars:7,consts:[[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"full-width"],["matInput","","formControlName","titleNo"],["matInput","","formControlName","taxDeclarationNo"],["formControlName","ownerId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","classification"],["matInput","","formControlName","location"],["matInput","","formControlName","landArea"],["formControlName","propertyStatus"],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"],[3,"value"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"h2",1),a(2),o(),n(3,"form",2),C("ngSubmit",function(){return r.onSubmit()}),n(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),a(7,"Title No"),o(),_(8,"input",5),o(),n(9,"mat-form-field",4)(10,"mat-label"),a(11,"Tax Declaration No"),o(),_(12,"input",6),o(),n(13,"mat-form-field",4)(14,"mat-label"),a(15,"Select owner"),o(),n(16,"mat-select",7),C("selectionChange",function(d){return r.onSelectedOwner(d.value)}),p(17,Ve,2,2,"mat-option",8),o()(),n(18,"mat-form-field",4)(19,"mat-label"),a(20,"Select classification"),o(),n(21,"mat-select",9),p(22,ke,2,2,"mat-option",8),o()(),n(23,"mat-form-field",4)(24,"mat-label"),a(25,"Location"),o(),_(26,"input",10),o(),n(27,"mat-form-field",4)(28,"mat-label"),a(29,"Land Area"),o(),_(30,"input",11),o(),n(31,"mat-form-field",4)(32,"mat-label"),a(33,"Property Status"),o(),n(34,"mat-select",12),p(35,Ue,2,2,"mat-option",8),o()()(),n(36,"div",13)(37,"button",14),C("click",function(){return r.onCancel()}),a(38,"Cancel"),o(),n(39,"button",15),a(40),o()()()()),i&2&&(l(2),c("",r.isEditMode?"Edit":"Add"," Property"),l(),s("formGroup",r.form),l(14),s("ngForOf",r.users),l(5),s("ngForOf",r.clasificationOptions),l(13),s("ngForOf",r.propertyStatusOptions),l(4),s("disabled",!r.form.valid),l(),$(r.isEditMode?"Update":"Create"))},dependencies:[X,z,H,G,q,J,K,ee,E,D,Q,L,T,I,Z,ae,re,oe,b,w,se,ce,ne],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px}.full-width[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.dialog-actions[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end;gap:12px}"]})};var $e=["dynamicComponentContainer"],je=()=>[5,10,25,100];function Le(e,t){e&1&&(n(0,"th",26),a(1,"Property ID "),o())}function Qe(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.propertyId," ")}}function Be(e,t){e&1&&(n(0,"th",26),a(1," Tax Declaration No "),o())}function He(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.taxDeclarationNo," ")}}function Ge(e,t){e&1&&(n(0,"th",26),a(1," Owner ID "),o())}function qe(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.ownerId," ")}}function ze(e,t){e&1&&(n(0,"th",26),a(1," Owner Name "),o())}function Je(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.ownerName," ")}}function Ke(e,t){e&1&&(n(0,"th",26),a(1," Title No "),o())}function We(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.titleNo," ")}}function Xe(e,t){e&1&&(n(0,"th",26),a(1," Classification "),o())}function Ye(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.classification," ")}}function Ze(e,t){e&1&&(n(0,"th",26),a(1," Location "),o())}function et(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.location," ")}}function tt(e,t){e&1&&(n(0,"th",26),a(1," Land Area "),o())}function it(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.landArea," ")}}function ot(e,t){e&1&&(n(0,"th",26),a(1," Property Status "),o())}function nt(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.propertyStatus===!0||i.propertyStatus===1?"Active":"Inactive"," ")}}function rt(e,t){e&1&&(n(0,"th",28),a(1," Action "),o())}function at(e,t){if(e&1){let i=F();n(0,"td",29)(1,"button",30),C("click",function(){let m=S(i).$implicit,d=P();return g(d.openDialog(m))}),n(2,"mat-icon"),a(3,"edit"),o()(),n(4,"button",31),C("click",function(){let m=S(i).$implicit,d=P();return g(d.deleteProperty(m.id))}),n(5,"mat-icon"),a(6,"delete"),o()()()}}function lt(e,t){e&1&&_(0,"tr",32)}function mt(e,t){e&1&&_(0,"tr",33)}function pt(e,t){if(e&1&&(n(0,"tr",34)(1,"td",35),a(2),o()()),e&2){P();let i=U(11);l(2),c('No data matching the filter "',i.value,'"')}}var Ee=class e{constructor(t,i,r,m){this.router=t;this.usersService=i;this.propertyService=r;this.dialog=m}showSubCode=!1;selectedMasterCode;selectedDescription;displayedColumns=["taxDeclarationNo","ownerName","titleNo","classification","location","landArea","propertyStatus","actions"];dataSource;paginator;sort;table;container;ngOnInit(){this.loadProperty()}loadProperty(){this.propertyService.getAllProperties().subscribe(t=>{let i=t.map(r=>this.usersService.getUserById(r.ownerId));V(i).subscribe(r=>{t.forEach((m,d)=>{m.ownerName=r[d]?.userName||""}),this.dataSource=new Me(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})})}applyFilter(t){let i=t.target.value;this.dataSource.filter=i.trim().toLocaleLowerCase()}openDialog(t){this.dialog.open(R,{data:t||{}}).afterClosed().subscribe(r=>{r&&(r.id?this.propertyService.updateProperty(r).subscribe(()=>{this.loadProperty()}):this.propertyService.createProperty(r).subscribe(()=>{this.loadProperty()}))})}deleteProperty(t){confirm("Are you sure you want to delete this property?")&&this.propertyService.deleteProperty(t).subscribe(()=>{this.loadProperty()})}static \u0275fac=function(i){return new(i||e)(y(B),y(O),y(De),y(pe))};static \u0275cmp=M({type:e,selectors:[["app-property"]],viewQuery:function(i,r){if(i&1&&(h(A,5),h(be,5),h(N,5),h($e,5,k)),i&2){let m;v(m=x())&&(r.paginator=m.first),v(m=x())&&(r.sort=m.first),v(m=x())&&(r.table=m.first),v(m=x())&&(r.container=m.first)}},decls:48,vars:5,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",3,"click"],[1,"full-width"],["matInput","","placeholder","Search property...",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","propertyId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","taxDeclarationNo"],["matColumnDef","ownerId"],["matColumnDef","ownerName"],["matColumnDef","titleNo"],["matColumnDef","classification"],["matColumnDef","location"],["matColumnDef","landArea"],["matColumnDef","propertyStatus"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary","matTooltip","Edit Property",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete Property",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,r){if(i&1){let m=F();n(0,"div",1)(1,"div")(2,"h1",2),a(3,"Property"),o(),n(4,"button",3),C("click",function(){return S(m),g(r.openDialog())}),a(5,"Add Property"),o()(),n(6,"div")(7,"mat-form-field",4)(8,"mat-label"),a(9,"Filter"),o(),n(10,"input",5,0),C("keyup",function(Ie){return S(m),g(r.applyFilter(Ie))}),o()()(),n(12,"div",6)(13,"table",7),f(14,8),p(15,Le,2,0,"th",9)(16,Qe,2,1,"td",10),u(),f(17,11),p(18,Be,2,0,"th",9)(19,He,2,1,"td",10),u(),f(20,12),p(21,Ge,2,0,"th",9)(22,qe,2,1,"td",10),u(),f(23,13),p(24,ze,2,0,"th",9)(25,Je,2,1,"td",10),u(),f(26,14),p(27,Ke,2,0,"th",9)(28,We,2,1,"td",10),u(),f(29,15),p(30,Xe,2,0,"th",9)(31,Ye,2,1,"td",10),u(),f(32,16),p(33,Ze,2,0,"th",9)(34,et,2,1,"td",10),u(),f(35,17),p(36,tt,2,0,"th",9)(37,it,2,1,"td",10),u(),f(38,18),p(39,ot,2,0,"th",9)(40,nt,2,1,"td",10),u(),f(41,19),p(42,rt,2,0,"th",20)(43,at,7,0,"td",21),u(),p(44,lt,1,0,"tr",22)(45,mt,1,0,"tr",23)(46,pt,3,1,"tr",24),o(),_(47,"mat-paginator",25),o()()}i&2&&(l(13),s("dataSource",r.dataSource),l(31),s("matHeaderRowDef",r.displayedColumns),l(),s("matRowDefColumns",r.displayedColumns),l(2),s("pageSizeOptions",j(4,je)))},dependencies:[E,T,I,D,xe,N,fe,Ce,ue,de,Se,ye,_e,ge,he,ve,ie,te,A,b,w,Y,we,Pe],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}"]})};export{Ee as PropertyComponent};
