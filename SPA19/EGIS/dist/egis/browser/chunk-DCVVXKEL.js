import"./chunk-F5X5MWHG.js";import{a as Ne,b as Pe,c as R,e as ke}from"./chunk-2IGJZFV7.js";import{a as pe,b as ce,c as ue,e as fe,h as ge}from"./chunk-KGOMAVQY.js";import{a as O,b as _e,c as Ce,e as be,f as ve,h as he,i as ye,k as xe,l as Se,n as Ie,o as Me,p as Ae,q as Ee}from"./chunk-NFABPVPM.js";import{a as we}from"./chunk-XTPI2WRZ.js";import{a as Oe}from"./chunk-ZCYPDZJY.js";import{a as Te}from"./chunk-WXYTA3LY.js";import{a as Ue}from"./chunk-IF4M6L7M.js";import{a as De}from"./chunk-QEDYW4PW.js";import"./chunk-RC2IBETA.js";import"./chunk-SYAC655V.js";import"./chunk-ECBSDO4K.js";import{a as ae,b as oe}from"./chunk-DQWGBFJK.js";import"./chunk-MS4AQ6UA.js";import{a as de,b as se}from"./chunk-LB6LRJVS.js";import{f as me,i as le}from"./chunk-YBNMVR6Q.js";import{a as ie,b as A,c as E}from"./chunk-AWMIQM5V.js";import{c as Q}from"./chunk-FE5V2QVG.js";import"./chunk-O27SARHL.js";import"./chunk-3RK6DDJD.js";import"./chunk-SGYCFQGT.js";import"./chunk-HSUA2CKH.js";import"./chunk-TMATL23G.js";import{b as G,g as Y,h as J,ha as w,ia as ne,m as K,oa as D,p as W,pa as re,q as X,s as Z,ta as T,ua as U,v as ee,x as te}from"./chunk-FPYKYBTQ.js";import{Db as r,Eb as i,Fb as _,Gb as u,Hb as f,Jb as k,Jc as L,Kc as H,Lb as C,Mb as M,Qb as y,Rb as x,Rc as z,Sb as S,Vb as B,Wb as a,Xb as $,Ya as m,Yb as p,bb as c,db as V,dc as j,ib as I,ka as v,la as h,nb as l,ub as d}from"./chunk-NKHI3LCY.js";function je(e,t){e&1&&(r(0,"mat-error"),a(1,"Address is required"),i())}function Le(e,t){e&1&&(r(0,"mat-error"),a(1,"House No is required"),i())}function He(e,t){if(e&1&&(r(0,"mat-option",18),a(1),i()),e&2){let n=t.$implicit;d("value",n.id),m(),p(" ",n.name," ")}}function ze(e,t){e&1&&(r(0,"mat-error"),a(1,"Country is required"),i())}function Qe(e,t){if(e&1&&(r(0,"mat-option",18),a(1),i()),e&2){let n=t.$implicit;d("value",n.id),m(),p(" ",n.name," ")}}function Ge(e,t){e&1&&(r(0,"mat-error"),a(1,"Province is required"),i())}function Ye(e,t){if(e&1&&(r(0,"mat-option",18),a(1),i()),e&2){let n=t.$implicit;d("value",n.id),m(),p(" ",n.name," ")}}function Je(e,t){e&1&&(r(0,"mat-error"),a(1,"City is required"),i())}function Ke(e,t){if(e&1&&(r(0,"mat-option",18),a(1),i()),e&2){let n=t.$implicit;d("value",n.id),m(),p(" ",n.name," ")}}function We(e,t){e&1&&(r(0,"mat-error"),a(1,"Barangay is required"),i())}var N=class e{constructor(t,n,o,s,g,b,P){this.fb=t;this.dialogRef=n;this.data=o;this.countryService=s;this.provinceService=g;this.cityService=b;this.barangayService=P;this.isEditMode=!!o.id,this.form=this.fb.group({id:[o.id||null],addressLine1:[o.addressLine1||"",[]],buildingName:[o.buildingName||"",[]],houseNo:[o.houseNo||"",[]],subdivision:[o.subdivision||"",[]],countryId:[o.countryId||null,[]],provinceId:[o.provinceId||null,[]],cityId:[o.cityId||null,[]],barangayId:[o.barangayId||null,[]]})}form;isEditMode;countries=[];provinces=[];cities=[];barangays=[];ngOnInit(){this.countryService.getCountries().subscribe(t=>this.countries=t),this.form.get("countryId")?.valueChanges.subscribe(t=>{this.provinceService.getProvinces().subscribe(n=>this.provinces=n),this.cities=[],this.barangays=[],this.form.patchValue({provinceId:null,cityId:null,barangayId:null})}),this.form.get("provinceId")?.valueChanges.subscribe(t=>{this.cityService.getCities().subscribe(n=>this.cities=n),this.barangays=[],this.form.patchValue({cityId:null,barangayId:null})}),this.form.get("cityId")?.valueChanges.subscribe(t=>{this.barangayService.getBarangays().subscribe(n=>this.barangays=n),this.form.patchValue({barangayId:null})})}onSubmit(){this.form.valid&&(console.log("Form submitted:",this.form.value),this.dialogRef.close(this.form.value))}onCancel(){this.dialogRef.close()}static \u0275fac=function(n){return new(n||e)(c(ee),c(pe),c(ce),c(De),c(Ue),c(Te),c(Oe))};static \u0275cmp=I({type:e,selectors:[["app-user-address-dialog"]],decls:52,vars:14,consts:[[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"full-width"],["matInput","","formControlName","addressLine1","required",""],[4,"ngIf"],["matInput","","formControlName","buildingName"],["matInput","","formControlName","houseNo","required",""],["matInput","","formControlName","subdivision"],["formControlName","countryId","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","provinceId","required",""],["formControlName","cityId","required",""],["formControlName","barangayId","required",""],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"],[3,"value"]],template:function(n,o){if(n&1&&(r(0,"div",0)(1,"h2",1),a(2),i(),r(3,"form",2),C("ngSubmit",function(){return o.onSubmit()}),r(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),a(7,"Address"),i(),_(8,"input",5),l(9,je,2,0,"mat-error",6),i(),r(10,"mat-form-field",4)(11,"mat-label"),a(12,"Building Name"),i(),_(13,"input",7),i(),r(14,"mat-form-field",4)(15,"mat-label"),a(16,"House No"),i(),_(17,"input",8),l(18,Le,2,0,"mat-error",6),i(),r(19,"mat-form-field",4)(20,"mat-label"),a(21,"Subdivision"),i(),_(22,"input",9),i(),r(23,"mat-form-field",4)(24,"mat-label"),a(25,"Country"),i(),r(26,"mat-select",10),l(27,He,2,2,"mat-option",11),i(),l(28,ze,2,0,"mat-error",6),i(),r(29,"mat-form-field",4)(30,"mat-label"),a(31,"Province"),i(),r(32,"mat-select",12),l(33,Qe,2,2,"mat-option",11),i(),l(34,Ge,2,0,"mat-error",6),i(),r(35,"mat-form-field",4)(36,"mat-label"),a(37,"City"),i(),r(38,"mat-select",13),l(39,Ye,2,2,"mat-option",11),i(),l(40,Je,2,0,"mat-error",6),i(),r(41,"mat-form-field",4)(42,"mat-label"),a(43,"Barangay"),i(),r(44,"mat-select",14),l(45,Ke,2,2,"mat-option",11),i(),l(46,We,2,0,"mat-error",6),i()(),r(47,"div",15)(48,"button",16),C("click",function(){return o.onCancel()}),a(49,"Cancel"),i(),r(50,"button",17),a(51),i()()()()),n&2){let s,g,b,P,F,q;m(2),p("",o.isEditMode?"Edit":"Add"," User"),m(),d("formGroup",o.form),m(6),d("ngIf",(s=o.form.get("addressLine1"))==null?null:s.hasError("required")),m(9),d("ngIf",(g=o.form.get("houseNo"))==null?null:g.hasError("required")),m(9),d("ngForOf",o.countries),m(),d("ngIf",(b=o.form.get("countryId"))==null?null:b.hasError("required")),m(5),d("ngForOf",o.provinces),m(),d("ngIf",(P=o.form.get("provinceId"))==null?null:P.hasError("required")),m(5),d("ngForOf",o.cities),m(),d("ngIf",(F=o.form.get("cityId"))==null?null:F.hasError("required")),m(5),d("ngForOf",o.barangays),m(),d("ngIf",(q=o.form.get("barangayId"))==null?null:q.hasError("required")),m(4),d("disabled",!o.form.valid),m(),$(o.isEditMode?"Update":"Create")}},dependencies:[z,L,H,U,T,D,w,ne,re,E,A,ge,fe,te,K,G,Y,J,Z,W,X,se,de,me,le],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px;background:transparent!important;box-shadow:none!important}.full-width[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.dialog-actions[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end;gap:12px}  .mat-dialog-container{background:#ffffff80!important;box-shadow:0 8px 32px #0000002e;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}  .mat-form-field-appearance-fill .mat-form-field-flex,   .mat-form-field-appearance-fill .mat-form-field-infix,   .mat-form-field-appearance-fill .mat-form-field-outline,   .mat-form-field-wrapper,   .mat-form-field-flex,   .mat-form-field-infix,   .mat-input-element,   .mat-select-trigger,   .mat-select-value,   .mat-select,   input.mat-input-element,   textarea.mat-input-element{background:transparent!important;box-shadow:none!important}"]})};var Xe=["dynamicComponentContainer"],Ze=()=>[5,10,25,100];function et(e,t){e&1&&(r(0,"th",27),a(1," Id "),i())}function tt(e,t){if(e&1&&(r(0,"td",28),a(1),i()),e&2){let n=t.$implicit;m(),p(" ",n.id," ")}}function it(e,t){e&1&&(r(0,"th",27),a(1," Address "),i())}function nt(e,t){if(e&1&&(r(0,"td",28),a(1),i()),e&2){let n=t.$implicit;m(),p(" ",n.addressLine1," ")}}function rt(e,t){e&1&&(r(0,"th",27),a(1," Building Name "),i())}function at(e,t){if(e&1&&(r(0,"td",28),a(1),i()),e&2){let n=t.$implicit;m(),p(" ",n.buildingName," ")}}function ot(e,t){e&1&&(r(0,"th",27),a(1," House No "),i())}function mt(e,t){if(e&1&&(r(0,"td",28),a(1),i()),e&2){let n=t.$implicit;m(),p(" ",n.houseNo," ")}}function lt(e,t){e&1&&(r(0,"th",27),a(1," Subdivision "),i())}function dt(e,t){if(e&1&&(r(0,"td",28),a(1),i()),e&2){let n=t.$implicit;m(),p(" ",n.subdivision," ")}}function st(e,t){e&1&&(r(0,"th",27),a(1," Country "),i())}function pt(e,t){if(e&1&&(r(0,"td",28),a(1),i()),e&2){let n=t.$implicit;m(),p(" ",n.countryId," ")}}function ct(e,t){e&1&&(r(0,"th",27),a(1," Province "),i())}function ut(e,t){if(e&1&&(r(0,"td",28),a(1),i()),e&2){let n=t.$implicit;m(),p(" ",n.provinceId," ")}}function ft(e,t){e&1&&(r(0,"th",27),a(1," City "),i())}function gt(e,t){if(e&1&&(r(0,"td",28),a(1),i()),e&2){let n=t.$implicit;m(),p(" ",n.cityId," ")}}function _t(e,t){e&1&&(r(0,"th",27),a(1," Barangay "),i())}function Ct(e,t){if(e&1&&(r(0,"td",28),a(1),i()),e&2){let n=t.$implicit;m(),p(" ",n.barangayId," ")}}function bt(e,t){e&1&&(r(0,"th",27),a(1," User ID "),i())}function vt(e,t){if(e&1&&(r(0,"td",28),a(1),i()),e&2){let n=t.$implicit;m(),p(" ",n.userId," ")}}function ht(e,t){e&1&&(r(0,"th",29),a(1," Action "),i())}function yt(e,t){if(e&1){let n=k();r(0,"td",30)(1,"button",31),C("click",function(){let s=v(n).$implicit,g=M();return h(g.openDialog(s))}),r(2,"mat-icon"),a(3,"edit"),i()(),r(4,"button",32),C("click",function(){let s=v(n).$implicit,g=M();return h(g.deleteAddress(s))}),r(5,"mat-icon"),a(6,"delete"),i()()()}}function xt(e,t){e&1&&_(0,"tr",33)}function St(e,t){e&1&&_(0,"tr",34)}function It(e,t){if(e&1&&(r(0,"tr",35)(1,"td",36),a(2),i()()),e&2){M();let n=B(13);m(2),p('No data matching the filter "',n.value,'"')}}var Re=class e{constructor(t,n,o){this.router=t;this.addressService=n;this.dialog=o}addresses=[];displayedColumns=["addressLine1","buildingName","houseNo","subdivision","countryId","provinceId","cityId","barangayId","userId","actions"];dataSource;paginator;sort;table;container;ngOnInit(){this.loadAddresses()}loadAddresses(){this.addressService.getAddresses().subscribe(t=>{this.dataSource=new Ee(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(t){let n=t.target.value;this.dataSource.filter=n.trim().toLocaleLowerCase()}openDialog(t){this.dialog.open(N,{data:t||{}}).afterClosed().subscribe(o=>{o&&(o.id?this.addressService.updateAddress(o).subscribe(()=>{this.loadAddresses()}):this.addressService.createAddress(o).subscribe(()=>{this.loadAddresses()}))})}deleteAddress(t){confirm(`Delete address ${t.addressLine1}?`)&&this.addressService.deleteAddress(t.id).subscribe(()=>this.loadAddresses())}static \u0275fac=function(n){return new(n||e)(c(Q),c(we),c(ue))};static \u0275cmp=I({type:e,selectors:[["app-user-address"]],viewQuery:function(n,o){if(n&1&&(y(R,5),y(ke,5),y(O,5),y(Xe,5,V)),n&2){let s;x(s=S())&&(o.paginator=s.first),x(s=S())&&(o.sort=s.first),x(s=S())&&(o.table=s.first),x(s=S())&&(o.container=s.first)}},decls:53,vars:5,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",1,"load-batch-btn",3,"click"],[1,"full-width"],["matInput","","placeholder","Search address...",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","addressLine1"],["matColumnDef","buildingName"],["matColumnDef","houseNo"],["matColumnDef","subdivision"],["matColumnDef","countryId"],["matColumnDef","provinceId"],["matColumnDef","cityId"],["matColumnDef","barangayId"],["matColumnDef","userId"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of addresses",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary","matTooltip","Edit Address",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete Address",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(n,o){if(n&1){let s=k();r(0,"div",1)(1,"div")(2,"h1",2),a(3,"Address"),i(),a(4," \xA0 "),r(5,"button",3),C("click",function(){return v(s),h(o.openDialog())}),a(6,"Add Address"),i()(),a(7," \xA0 "),r(8,"div")(9,"mat-form-field",4)(10,"mat-label"),a(11,"Filter"),i(),r(12,"input",5,0),C("keyup",function(b){return v(s),h(o.applyFilter(b))}),i()()(),r(14,"div",6)(15,"table",7),u(16,8),l(17,et,2,0,"th",9)(18,tt,2,1,"td",10),f(),u(19,11),l(20,it,2,0,"th",9)(21,nt,2,1,"td",10),f(),u(22,12),l(23,rt,2,0,"th",9)(24,at,2,1,"td",10),f(),u(25,13),l(26,ot,2,0,"th",9)(27,mt,2,1,"td",10),f(),u(28,14),l(29,lt,2,0,"th",9)(30,dt,2,1,"td",10),f(),u(31,15),l(32,st,2,0,"th",9)(33,pt,2,1,"td",10),f(),u(34,16),l(35,ct,2,0,"th",9)(36,ut,2,1,"td",10),f(),u(37,17),l(38,ft,2,0,"th",9)(39,gt,2,1,"td",10),f(),u(40,18),l(41,_t,2,0,"th",9)(42,Ct,2,1,"td",10),f(),u(43,19),l(44,bt,2,0,"th",9)(45,vt,2,1,"td",10),f(),u(46,20),l(47,ht,2,0,"th",21)(48,yt,7,0,"td",22),f(),l(49,xt,1,0,"tr",23)(50,St,1,0,"tr",24)(51,It,3,1,"tr",25),i(),_(52,"mat-paginator",26),i()()}n&2&&(m(15),d("dataSource",o.dataSource),m(34),d("matHeaderRowDef",o.displayedColumns),m(),d("matRowDefColumns",o.displayedColumns),m(2),d("pageSizeOptions",j(4,Ze)))},dependencies:[U,T,D,w,Ae,O,Ce,ye,be,_e,xe,ve,he,Se,Ie,Me,oe,ae,R,E,A,ie,Pe,Ne],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px;border:1.5px solid #e0e0e0;border-radius:10px;padding:24px;background:transparent;box-shadow:none}.load-batch-btn[_ngcontent-%COMP%]{height:50px;min-width:120px;margin-left:8px;background:#4169e1!important;color:#fff!important;font-weight:600;font-size:16px;border-radius:8px;box-shadow:0 2px 8px #4169e126;transition:background .2s,box-shadow .2s,transform .1s;letter-spacing:.5px;border:none;display:flex;align-items:left;justify-content:center;padding:0 24px;margin-bottom:24px}.load-batch-btn[_ngcontent-%COMP%]:hover, .load-batch-btn[_ngcontent-%COMP%]:focus{background:#274bb5!important;box-shadow:0 4px 16px #4169e140;transform:translateY(-2px) scale(1.03)}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{background:transparent!important}.mat-elevation-z8[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important}  .mat-paginator,   .mat-paginator-container,   .mat-paginator-outer-container,   .mat-paginator-range-actions,   .mat-paginator-page-size,   .mat-paginator-page-size-label,   .mat-paginator-range-label,   .mat-paginator-navigation-previous,   .mat-paginator-navigation-next,   .mat-paginator-page-size-select,   .mat-paginator-page-size-select .mat-select-trigger,   .mat-paginator-page-size-select .mat-select-value,   .paginator-row,   div[style*=background],   .mat-mdc-paginator,   .mat-mdc-paginator-container,   .mat-mdc-paginator-range-actions{background:transparent!important;box-shadow:none!important}  .mat-paginator,   .mat-paginator-container,   .mat-paginator-outer-container,   .mat-mdc-paginator,   .mat-mdc-paginator-container{background:transparent!important;box-shadow:none!important;border:none!important}"]})};export{Re as UserAddressComponent};
