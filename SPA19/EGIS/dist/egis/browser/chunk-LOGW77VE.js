import{a as T}from"./chunk-6ZWM6SM5.js";import{a as Se,b as Me,c as xe}from"./chunk-V5IDTODI.js";import{b as oe}from"./chunk-LEOWTEI6.js";import"./chunk-MS4AQ6UA.js";import{c as V,e as ve,f as Oe,g as be}from"./chunk-4QXU7Q3Z.js";import{G as ge,I as Ce,J as he,e as E,f as re,g as le,i as ce,j as me,l as se,m as pe,o as fe,p as de,r as ue,s as _e,t as De,u as A}from"./chunk-MYHFZ2D2.js";import"./chunk-3RK6DDJD.js";import{$ as R,aa as ee,b as L,g as z,ga as w,h as U,ka as te,l as J,la as y,ma as I,n as K,o as W,p as X,pa as ie,q as Y,ra as ae,s as Z,sa as ne}from"./chunk-KTJ4FNCK.js";import{a as $,c as B}from"./chunk-XHFMZJAH.js";import"./chunk-IKLMD3RG.js";import{m as H,n as G,t as Q}from"./chunk-T6TR6RQX.js";import{Bb as o,Cb as n,Db as _,Eb as C,Fb as h,Hb as F,Lb as d,Mb as b,Qb as S,Rb as M,Sb as x,Va as c,Vb as k,Wb as r,Xb as P,Yb as u,Zb as j,_a as f,dc as q,fb as O,ia as D,ja as g,lb as s,sb as m}from"./chunk-5MRHDFKX.js";function Fe(e,t){if(e&1&&(o(0,"mat-option",13),r(1),n()),e&2){let a=t.$implicit;m("value",a.receiptNumber),c(),u(" ",a.receiptNumber," ")}}function Ae(e,t){e&1&&(o(0,"mat-error"),r(1,"Code"),n())}function Ve(e,t){e&1&&(o(0,"mat-error"),r(1,"Amount"),n())}function ke(e,t){e&1&&(o(0,"mat-error"),r(1,"Description"),n())}var N=class e{constructor(t,a,i,l){this.fb=t;this.dialogRef=a;this.data=i;this.orDetailService=l;this.isEditMode=!!i.id,this.form=this.fb.group({id:[i.id],receiptNumber:[this.orIdSelected],code:[i.code],description:[i.description],amount:[i.amount]})}form;isEditMode;orDetailsData=[];orIdSelected=0;ngOnInit(){this.loadORDetails()}onSelectionChange(t){this.orIdSelected=t.value,this.form.patchValue({receiptNumber:this.orIdSelected})}loadORDetails(){this.orDetailService.getOfficialReceiptDetails(this.orIdSelected).subscribe({next:t=>{this.orDetailsData=t}})}onSubmit(){this.form.valid&&(console.log(this.form.value),this.dialogRef.close(this.form.value))}onCancel(){this.dialogRef.close()}static \u0275fac=function(a){return new(a||e)(f(Y),f(Se),f(Me),f(T))};static \u0275cmp=O({type:e,selectors:[["app-officialreceipttransaction-details-dialog"]],decls:29,vars:8,consts:[[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"full-width"],[3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","code","required",""],[4,"ngIf"],["matInput","","formControlName","amount","required",""],["matInput","","formControlName","description","required",""],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"],[3,"value"]],template:function(a,i){if(a&1&&(o(0,"div",0)(1,"h2",1),r(2),n(),o(3,"form",2),d("ngSubmit",function(){return i.onSubmit()}),o(4,"mat-form-field",3)(5,"mat-label"),r(6,"Select ORId"),n(),o(7,"mat-select",4),d("selectionChange",function(p){return i.onSelectionChange(p)}),s(8,Fe,2,2,"mat-option",5),n()(),o(9,"mat-form-field",3)(10,"mat-label"),r(11,"Code"),n(),_(12,"input",6),s(13,Ae,2,0,"mat-error",7),n(),o(14,"mat-form-field",3)(15,"mat-label"),r(16,"Amount"),n(),_(17,"input",8),s(18,Ve,2,0,"mat-error",7),n(),o(19,"mat-form-field",3)(20,"mat-label"),r(21,"Description"),n(),_(22,"input",9),s(23,ke,2,0,"mat-error",7),n(),o(24,"div",10)(25,"button",11),d("click",function(){return i.onCancel()}),r(26,"Cancel"),n(),o(27,"button",12),r(28),n()()()()),a&2){let l,p,v;c(2),u("",i.isEditMode?"Edit":"Add"," Official Receipt Details"),c(),m("formGroup",i.form),c(5),m("ngForOf",i.orDetailsData),c(5),m("ngIf",(l=i.form.get("code"))==null?null:l.hasError("required")),c(5),m("ngIf",(p=i.form.get("amount"))==null?null:p.hasError("required")),c(5),m("ngIf",(v=i.form.get("description"))==null?null:v.hasError("required")),c(4),m("disabled",!i.form.valid),c(),P(i.isEditMode?"Update":"Create")}},dependencies:[Z,J,L,z,U,X,K,W,te,w,R,ee,Q,H,G,I,y,oe,he,Ce,ge],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px}.full-width[_ngcontent-%COMP%]{width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:8px}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}"]})};var Pe=()=>[5,10,25,100];function je(e,t){e&1&&(o(0,"th",21),r(1," Receipt Number "),n())}function qe(e,t){if(e&1&&(o(0,"td",22),r(1),n()),e&2){let a=t.$implicit;c(),u(" ",a.receiptNumber," ")}}function He(e,t){e&1&&(o(0,"th",21),r(1," Code "),n())}function Ge(e,t){if(e&1&&(o(0,"td",22),r(1),n()),e&2){let a=t.$implicit;c(),u(" ",a.code," ")}}function Qe(e,t){e&1&&(o(0,"th",21),r(1," Description "),n())}function $e(e,t){if(e&1&&(o(0,"td",22),r(1),n()),e&2){let a=t.$implicit;c(),u(" ",a.description," ")}}function Be(e,t){e&1&&(o(0,"th",21),r(1," Amount "),n())}function Le(e,t){if(e&1&&(o(0,"td",22),r(1),n()),e&2){let a=t.$implicit;c(),u(" ",a.amount," ")}}function ze(e,t){e&1&&(o(0,"th",23),r(1," Action "),n())}function Ue(e,t){if(e&1){let a=F();o(0,"td",24)(1,"button",25),d("click",function(){let l=D(a).$implicit,p=b();return g(p.openDialog(l))}),o(2,"mat-icon"),r(3,"edit"),n()(),o(4,"button",25),d("click",function(){let l=D(a).$implicit,p=b();return g(p.deleteOfficialReceiptDetails(l.id))}),o(5,"mat-icon"),r(6,"delete"),n()()()}}function Je(e,t){e&1&&_(0,"tr",26)}function Ke(e,t){e&1&&_(0,"tr",27)}function We(e,t){if(e&1&&(o(0,"tr",28)(1,"td",29),r(2),n()()),e&2){b();let a=k(13);c(2),u('No data matching the filter "',a.value,'"')}}var Re=class e{constructor(t,a,i,l){this.route=t;this.orDetailService=a;this.dialog=i;this.router=l}orNumber;orPayor;showORDetails=!1;displayedColumns=["receiptNumber","code","description","amount","actions"];dataSource;paginator;sort;table;ngOnInit(){this.route.params.subscribe(t=>{this.orNumber=t.receiptNumber,this.orPayor=t.payor,this.orDetailService.getOfficialReceiptDetails(this.orNumber).subscribe({next:a=>{this.dataSource=new A(a)},error:a=>{console.error("Error fetching official receipt:",a)}})})}loadOfficialReceiptDetails(){this.orDetailService.getOfficialReceiptDetails(this.orNumber).subscribe(t=>{this.dataSource=new A(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(t){let a=t.target.value;this.dataSource.filter=a.trim().toLocaleLowerCase()}openDialog(t){this.dialog.open(N,{data:t||{}}).afterClosed().subscribe(i=>{i&&(i.id?this.orDetailService.updateOfficialReceiptDetail(i).subscribe(()=>{this.loadOfficialReceiptDetails()}):this.orDetailService.createOfficialReceiptDetail(i).subscribe(()=>{this.loadOfficialReceiptDetails()}))})}deleteOfficialReceiptDetails(t){confirm("Are you sure you want to delete this official receipt detail?")&&this.orDetailService.deleteOfficialReceiptDetail(t).subscribe(()=>{this.loadOfficialReceiptDetails()})}goToOfficialReceipt(){this.router.navigate(["/mainlayout/officialreceipt"]),this.showORDetails=!0}static \u0275fac=function(a){return new(a||e)(f($),f(T),f(xe),f(B))};static \u0275cmp=O({type:e,selectors:[["app-officialreceipttransaction-details"]],viewQuery:function(a,i){if(a&1&&(S(V,5),S(ve,5),S(E,5)),a&2){let l;M(l=x())&&(i.paginator=l.first),M(l=x())&&(i.sort=l.first),M(l=x())&&(i.table=l.first)}},decls:39,vars:7,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",3,"click"],[1,"full-width"],["matInput","","placeholder","Search OR details...",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","receiptNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","description"],["matColumnDef","amount"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,i){if(a&1){let l=F();o(0,"div",1)(1,"div")(2,"h1",2),r(3),n(),r(4," \xA0 "),o(5,"button",3),d("click",function(){return D(l),g(i.openDialog())}),r(6,"Add OR details"),n()(),r(7," \xA0 "),o(8,"div")(9,"mat-form-field",4)(10,"mat-label"),r(11,"Filter"),n(),o(12,"input",5,0),d("keyup",function(v){return D(l),g(i.applyFilter(v))}),n()()(),r(14," \xA0 "),o(15,"div",6)(16,"table",7),C(17,8),s(18,je,2,0,"th",9)(19,qe,2,1,"td",10),h(),C(20,11),s(21,He,2,0,"th",9)(22,Ge,2,1,"td",10),h(),C(23,12),s(24,Qe,2,0,"th",9)(25,$e,2,1,"td",10),h(),C(26,13),s(27,Be,2,0,"th",9)(28,Le,2,1,"td",10),h(),C(29,14),s(30,ze,2,0,"th",15)(31,Ue,7,0,"td",16),h(),s(32,Je,1,0,"tr",17)(33,Ke,1,0,"tr",18)(34,We,3,1,"tr",19),n(),_(35,"mat-paginator",20),n(),o(36,"div")(37,"button",3),d("click",function(){return D(l),g(i.goToOfficialReceipt())}),r(38,"Go to Official Receipt"),n()()()}a&2&&(c(3),j("Official Receipt Details : ",i.orNumber," - ",i.orPayor,""),c(13),m("dataSource",i.dataSource),c(16),m("matHeaderRowDef",i.displayedColumns),c(),m("matRowDefColumns",i.displayedColumns),c(2),m("pageSizeOptions",q(6,Pe)))},dependencies:[w,I,y,R,De,E,le,pe,ce,re,fe,me,se,de,ue,_e,be,Oe,V,ne,ae,ie],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}"]})};export{Re as OfficialreceipttransactionDetailsComponent};
