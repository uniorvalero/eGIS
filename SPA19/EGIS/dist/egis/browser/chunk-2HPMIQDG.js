import{a as Qt}from"./chunk-HGMN7EGA.js";import{a as zt}from"./chunk-ZSWPU5YM.js";import"./chunk-F5X5MWHG.js";import{a as $t,b as Lt,c as q,e as jt}from"./chunk-2IGJZFV7.js";import{a as Mt,b as vt,c as wt,e as At,h as yt}from"./chunk-KGOMAVQY.js";import{a as B,b as Et,c as It,e as Tt,f as Pt,h as Ot,i as kt,k as Nt,l as Bt,n as Ft,o as Rt,p as Vt,q as qt}from"./chunk-NFABPVPM.js";import{a as ft,b as gt,c as _t,h as Ct}from"./chunk-3KDABX7K.js";import{c as ht,d as xt}from"./chunk-RC2IBETA.js";import"./chunk-SYAC655V.js";import"./chunk-ECBSDO4K.js";import{a as dt,b as ut}from"./chunk-DQWGBFJK.js";import"./chunk-MS4AQ6UA.js";import{a as St,b as Dt}from"./chunk-LB6LRJVS.js";import{f as bt}from"./chunk-YBNMVR6Q.js";import{a as pt,b as I,c as T}from"./chunk-AWMIQM5V.js";import"./chunk-O27SARHL.js";import"./chunk-3RK6DDJD.js";import"./chunk-SGYCFQGT.js";import"./chunk-HSUA2CKH.js";import"./chunk-TMATL23G.js";import{b as Z,g as tt,h as et,ha as P,ia as mt,la as ct,m as it,oa as O,p as nt,pa as st,q as at,s as ot,ta as k,ua as N,v as rt,x as lt}from"./chunk-FPYKYBTQ.js";import{Db as o,Eb as i,Fb as g,Gb as _,Hb as C,Jb as S,Jc as K,Kc as W,Lb as b,Mb as y,Nc as X,Qb as D,Rb as M,Rc as E,Sb as v,Vb as w,Wb as r,Xb as G,Ya as l,Yb as s,a as U,bb as h,cc as Y,db as H,dc as J,gc as R,ib as A,ic as V,ka as u,la as f,nb as c,ub as m}from"./chunk-NKHI3LCY.js";function Xt(t,e){if(t&1&&(o(0,"mat-option",19),r(1),i()),t&2){let a=e.$implicit;m("value",a.id),l(),s(" ",a.name," ")}}function Zt(t,e){t&1&&(o(0,"mat-error"),r(1,"Owner is required"),i())}function te(t,e){t&1&&(o(0,"mat-error"),r(1,"Business Name is required"),i())}function ee(t,e){t&1&&(o(0,"mat-error"),r(1,"Business Permit No. is required"),i())}function ie(t,e){if(t&1&&(o(0,"mat-option",19),r(1),i()),t&2){let a=e.$implicit;m("value",a.name),l(),s(" ",a.name," ")}}function ne(t,e){t&1&&(o(0,"mat-error"),r(1,"Status is required"),i())}function ae(t,e){t&1&&(o(0,"mat-error"),r(1,"Date of Application is required"),i())}function oe(t,e){t&1&&(o(0,"mat-error"),r(1,"Released Date is required"),i())}var F=class t{constructor(e,a,n,p){this.fb=e;this.dialogRef=a;this.data=n;this.bpltasuserService=p;this.isEditMode=!!n.id,this.form=this.fb.group({id:[n.id||null],ownerId:[n.ownerId||null],businessName:[n.businessName||"",[]],businessPermitNo:[n.businessPermitNo||"",[]],status:[n.status||"",[]],applicationDate:[n.applicationDate||"",[]],releaseDate:[n.releaseDate||"",[]]}),this.loadOwner()}form;isEditMode;userOwner="Owner";users=[];selectedUser=null;statusOptions=[{name:"Approved"},{name:"Cancelled"},{name:"For Inspection"}];loadOwner(){this.bpltasuserService.getUserIDName(this.userOwner).subscribe(e=>{this.users=e,console.log("Users loaded:",this.users)})}onSelectedOwner(e){let a=this.users.find(n=>n.id===e);this.selectedUser=a||null,console.log("Selected user:",this.selectedUser),this.form.patchValue({ownerId:e})}onSubmit(){let e=U({},this.form.value);if(this.form.valid){if(e.applicationDate instanceof Date){let a=e.applicationDate.getFullYear(),n=String(e.applicationDate.getMonth()+1).padStart(2,"0"),p=String(e.applicationDate.getDate()).padStart(2,"0");e.applicationDate=`${a}-${n}-${p}`}if(e.releaseDate instanceof Date){let a=e.releaseDate.getFullYear(),n=String(e.releaseDate.getMonth()+1).padStart(2,"0"),p=String(e.releaseDate.getDate()).padStart(2,"0");e.releaseDate=`${a}-${n}-${p}`}e.id=this.form.get("id")?.value,console.log("Form submitted with value:",e),this.dialogRef.close(e)}}onCancel(){this.dialogRef.close()}static \u0275fac=function(a){return new(a||t)(h(rt),h(Mt),h(vt),h(zt))};static \u0275cmp=A({type:t,selectors:[["app-application-dialog"]],features:[Y([xt()])],decls:48,vars:16,consts:[["picker",""],["picker2",""],[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"full-width"],["formControlName","ownerId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","formControlName","businessName","required",""],["matInput","","formControlName","businessPermitNo","required",""],["formControlName","status","required",""],["matInput","","formControlName","applicationDate",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","releaseDate",3,"matDatepicker"],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"],[3,"value"]],template:function(a,n){if(a&1){let p=S();o(0,"div",2)(1,"h2",3),r(2),i(),o(3,"form",4),b("ngSubmit",function(){return u(p),f(n.onSubmit())}),o(4,"div",5)(5,"mat-form-field",6)(6,"mat-label"),r(7,"Owner"),i(),o(8,"mat-select",7),b("selectionChange",function(x){return u(p),f(n.onSelectedOwner(x.value))}),c(9,Xt,2,2,"mat-option",8),i(),c(10,Zt,2,0,"mat-error",9),i(),o(11,"mat-form-field",6)(12,"mat-label"),r(13,"Business Name"),i(),g(14,"input",10),c(15,te,2,0,"mat-error",9),i(),o(16,"mat-form-field",6)(17,"mat-label"),r(18,"Business Permit No."),i(),g(19,"input",11),c(20,ee,2,0,"mat-error",9),i(),o(21,"mat-form-field",6)(22,"mat-label"),r(23,"Status"),i(),o(24,"mat-select",12),c(25,ie,2,2,"mat-option",8),i(),c(26,ne,2,0,"mat-error",9),i(),o(27,"mat-form-field",6)(28,"mat-label"),r(29,"Date of Application"),i(),g(30,"input",13)(31,"mat-datepicker-toggle",14)(32,"mat-datepicker",null,0),c(34,ae,2,0,"mat-error",9),i(),o(35,"mat-form-field",6)(36,"mat-label"),r(37,"Released Date"),i(),g(38,"input",15)(39,"mat-datepicker-toggle",14)(40,"mat-datepicker",null,1),c(42,oe,2,0,"mat-error",9),i()(),o(43,"div",16)(44,"button",17),b("click",function(){return u(p),f(n.onCancel())}),r(45,"Cancel"),i(),o(46,"button",18),r(47),i()()()()}if(a&2){let p,d,x,$,L,j,z=w(33),Q=w(41);l(2),s("",n.isEditMode?"Edit":"Add"," User"),l(),m("formGroup",n.form),l(6),m("ngForOf",n.users),l(),m("ngIf",(p=n.form.get("ownerId"))==null?null:p.hasError("required")),l(5),m("ngIf",(d=n.form.get("businessName"))==null?null:d.hasError("required")),l(5),m("ngIf",(x=n.form.get("businessPermitNo"))==null?null:x.hasError("required")),l(5),m("ngForOf",n.statusOptions),l(),m("ngIf",($=n.form.get("status"))==null?null:$.hasError("required")),l(4),m("matDatepicker",z),l(),m("for",z),l(3),m("ngIf",(L=n.form.get("applicationDate"))==null?null:L.hasError("required")),l(4),m("matDatepicker",Q),l(),m("for",Q),l(3),m("ngIf",(j=n.form.get("releaseDate"))==null?null:j.hasError("required")),l(4),m("disabled",!n.form.valid),l(),G(n.isEditMode?"Update":"Create")}},dependencies:[E,K,W,lt,it,Z,tt,et,ot,nt,at,N,k,O,P,mt,ct,Ct,ft,gt,_t,st,T,I,yt,At,ht,Dt,St,bt],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px;background:transparent!important;box-shadow:none!important}.full-width[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.dialog-actions[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end;gap:12px}  .mat-dialog-container{background:#ffffff80!important;box-shadow:0 8px 32px #0000002e;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}  .mat-form-field-appearance-fill .mat-form-field-flex,   .mat-form-field-appearance-fill .mat-form-field-infix,   .mat-form-field-appearance-fill .mat-form-field-outline,   .mat-form-field-wrapper,   .mat-form-field-flex,   .mat-form-field-infix,   .mat-input-element,   .mat-select-trigger,   .mat-select-value,   .mat-select,   input.mat-input-element,   textarea.mat-input-element{background:transparent!important;box-shadow:none!important}"],changeDetection:0})};var re=["dynamicComponentContainer"],le=()=>[5,10,25,100];function pe(t,e){t&1&&(o(0,"th",24),r(1," Application ID"),i())}function me(t,e){if(t&1&&(o(0,"td",25),r(1),i()),t&2){let a=e.$implicit;l(),s(" ",a.id," ")}}function ce(t,e){t&1&&(o(0,"th",24),r(1," Owner ID "),i())}function se(t,e){if(t&1&&(o(0,"td",25),r(1),i()),t&2){let a=e.$implicit;l(),s(" ",a.ownerId," ")}}function de(t,e){t&1&&(o(0,"th",24),r(1," Business Name "),i())}function ue(t,e){if(t&1&&(o(0,"td",25),r(1),i()),t&2){let a=e.$implicit;l(),s(" ",a.businessName," ")}}function fe(t,e){t&1&&(o(0,"th",24),r(1," Business Permit No. "),i())}function ge(t,e){if(t&1&&(o(0,"td",25),r(1),i()),t&2){let a=e.$implicit;l(),s(" ",a.businessPermitNo," ")}}function _e(t,e){t&1&&(o(0,"th",24),r(1," Status "),i())}function Ce(t,e){if(t&1&&(o(0,"td",25),r(1),i()),t&2){let a=e.$implicit;l(),s(" ",a.status," ")}}function be(t,e){t&1&&(o(0,"th",24),r(1," Date of Application "),i())}function he(t,e){if(t&1&&(o(0,"td",25),r(1),R(2,"date"),i()),t&2){let a=e.$implicit;l(),s(" ",V(2,1,a.applicationDate,"shortDate")," ")}}function xe(t,e){t&1&&(o(0,"th",24),r(1," Released Date "),i())}function Se(t,e){if(t&1&&(o(0,"td",25),r(1),R(2,"date"),i()),t&2){let a=e.$implicit;l(),s(" ",V(2,1,a.releaseDate,"shortDate")," ")}}function De(t,e){t&1&&(o(0,"th",26),r(1," Action "),i())}function Me(t,e){if(t&1){let a=S();o(0,"td",27)(1,"button",28),b("click",function(){let p=u(a).$implicit,d=y();return f(d.openDialog(p))}),o(2,"mat-icon"),r(3,"edit"),i()(),o(4,"button",29),b("click",function(){let p=u(a).$implicit,d=y();return f(d.deleteApplication(p.id))}),o(5,"mat-icon"),r(6,"delete"),i()()()}}function ve(t,e){t&1&&g(0,"tr",30)}function we(t,e){t&1&&g(0,"tr",31)}function Ae(t,e){if(t&1&&(o(0,"tr",32)(1,"td",33),r(2),i()()),t&2){y();let a=w(13);l(2),s('No data matching the filter "',a.value,'"')}}var Ut=class t{constructor(e,a){this.bpltasapplicationServicee=e;this.dialog=a}showSubCode=!1;selectedMasterCode;selectedDescription;displayedColumns=["ownerId","businessName","businessPermitNo","status","applicationDate","releaseDate","actions"];dataSource;paginator;sort;table;container;ngOnInit(){this.loadApplication()}loadApplication(){this.bpltasapplicationServicee.getApplications().subscribe(e=>{this.dataSource=new qt(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(e){let a=e.target.value;this.dataSource.filter=a.trim().toLocaleLowerCase()}openDialog(e){this.dialog.open(F,{data:e||{}}).afterClosed().subscribe(n=>{n&&(n.id?(console.log("for edit",n),this.bpltasapplicationServicee.updateApplication(n).subscribe(()=>{this.loadApplication()})):(console.log("for create",n),this.bpltasapplicationServicee.createApplication(n).subscribe(()=>{this.loadApplication()})))})}deleteApplication(e){confirm("Are you sure you want to delete this applicaition?")&&this.bpltasapplicationServicee.deleteAApplication(e).subscribe(()=>{this.loadApplication()})}static \u0275fac=function(a){return new(a||t)(h(Qt),h(wt))};static \u0275cmp=A({type:t,selectors:[["app-application"]],viewQuery:function(a,n){if(a&1&&(D(q,5),D(jt,5),D(B,5),D(re,5,H)),a&2){let p;M(p=v())&&(n.paginator=p.first),M(p=v())&&(n.sort=p.first),M(p=v())&&(n.table=p.first),M(p=v())&&(n.container=p.first)}},decls:44,vars:5,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",1,"load-batch-btn",3,"click"],[1,"full-width"],["matInput","","placeholder","Search application..",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ownerId"],["matColumnDef","businessName"],["matColumnDef","businessPermitNo"],["matColumnDef","status"],["matColumnDef","applicationDate"],["matColumnDef","releaseDate"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of user",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary","matTooltip","Edit application",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete application",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,n){if(a&1){let p=S();o(0,"div",1)(1,"div")(2,"h1",2),r(3,"Business Application"),i(),r(4," \xA0 "),o(5,"button",3),b("click",function(){return u(p),f(n.openDialog())}),r(6,"Apply"),i()(),r(7," \xA0 "),o(8,"div")(9,"mat-form-field",4)(10,"mat-label"),r(11,"Filter"),i(),o(12,"input",5,0),b("keyup",function(x){return u(p),f(n.applyFilter(x))}),i()()(),o(14,"div",6)(15,"table",7),_(16,8),c(17,pe,2,0,"th",9)(18,me,2,1,"td",10),C(),_(19,11),c(20,ce,2,0,"th",9)(21,se,2,1,"td",10),C(),_(22,12),c(23,de,2,0,"th",9)(24,ue,2,1,"td",10),C(),_(25,13),c(26,fe,2,0,"th",9)(27,ge,2,1,"td",10),C(),_(28,14),c(29,_e,2,0,"th",9)(30,Ce,2,1,"td",10),C(),_(31,15),c(32,be,2,0,"th",9)(33,he,3,4,"td",10),C(),_(34,16),c(35,xe,2,0,"th",9)(36,Se,3,4,"td",10),C(),_(37,17),c(38,De,2,0,"th",18)(39,Me,7,0,"td",19),C(),c(40,ve,1,0,"tr",20)(41,we,1,0,"tr",21)(42,Ae,3,1,"tr",22),i(),g(43,"mat-paginator",23),i()()}a&2&&(l(15),m("dataSource",n.dataSource),l(25),m("matHeaderRowDef",n.displayedColumns),l(),m("matRowDefColumns",n.displayedColumns),l(2),m("pageSizeOptions",J(4,le)))},dependencies:[O,N,k,P,Vt,B,It,kt,Tt,Et,Nt,Pt,Ot,Bt,Ft,Rt,ut,dt,q,T,I,pt,Lt,$t,E,X],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px;border:1.5px solid #e0e0e0;border-radius:10px;padding:24px;background:transparent;box-shadow:none}.load-batch-btn[_ngcontent-%COMP%]{height:50px;min-width:120px;margin-left:8px;background:#4169e1!important;color:#fff!important;font-weight:600;font-size:16px;border-radius:8px;box-shadow:0 2px 8px #4169e126;transition:background .2s,box-shadow .2s,transform .1s;letter-spacing:.5px;border:none;display:flex;align-items:left;justify-content:center;padding:0 24px;margin-bottom:24px}.load-batch-btn[_ngcontent-%COMP%]:hover, .load-batch-btn[_ngcontent-%COMP%]:focus{background:#274bb5!important;box-shadow:0 4px 16px #4169e140;transform:translateY(-2px) scale(1.03)}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{background:transparent!important}.mat-elevation-z8[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important}  .mat-paginator,   .mat-paginator-container,   .mat-paginator-outer-container,   .mat-paginator-range-actions,   .mat-paginator-page-size,   .mat-paginator-page-size-label,   .mat-paginator-range-label,   .mat-paginator-navigation-previous,   .mat-paginator-navigation-next,   .mat-paginator-page-size-select,   .mat-paginator-page-size-select .mat-select-trigger,   .mat-paginator-page-size-select .mat-select-value,   .paginator-row,   div[style*=background],   .mat-mdc-paginator,   .mat-mdc-paginator-container,   .mat-mdc-paginator-range-actions{background:transparent!important;box-shadow:none!important}  .mat-paginator,   .mat-paginator-container,   .mat-paginator-outer-container,   .mat-mdc-paginator,   .mat-mdc-paginator-container{background:transparent!important;box-shadow:none!important;border:none!important}"]})};export{Ut as ApplicationComponent};
