import{a as Ot}from"./chunk-XFUHRFGG.js";import{a as H}from"./chunk-IBAYAYJH.js";import{a as Rt,b as Ft,c as Nt}from"./chunk-XHTP2MJK.js";import{h as wt}from"./chunk-QPQHFBXO.js";import{d as At}from"./chunk-DBLGM7RZ.js";import{a as $,b as q,c as Q,e as Et,h as It}from"./chunk-V5IDTODI.js";import"./chunk-F5X5MWHG.js";import"./chunk-MS4AQ6UA.js";import{a as bt,b as Mt,c as J,e as vt,f as Dt,g as yt}from"./chunk-4QXU7Q3Z.js";import{G as gt,I as St,J as ht,e as G,f as lt,g as rt,i as pt,j as st,l as dt,m as ut,o as ct,p as ft,r as xt,s as Ct,t as _t,u as Tt}from"./chunk-MYHFZ2D2.js";import"./chunk-3RK6DDJD.js";import{$ as g,b as R,ca as at,d as U,da as ot,g as F,ga as S,h as N,ka as L,l as O,la as h,m as nt,ma as b,n as P,o as k,p as V,pa as mt,q as j,ra as M,s as B,sa as v}from"./chunk-KTJ4FNCK.js";import"./chunk-IKLMD3RG.js";import{m as et,t as it}from"./chunk-T6TR6RQX.js";import{Bb as e,Cb as i,Db as f,Eb as x,Fb as C,Hb as W,Lb as _,Mb as A,Qb as E,Rb as I,Sb as w,Va as l,Vb as X,Wb as o,Xb as Z,Yb as d,_a as c,ab as K,dc as tt,fb as T,ia as D,ja as y,lb as s,sb as u}from"./chunk-5MRHDFKX.js";var Y=class t{constructor(a,n,m){this.fb=a;this.dialogRef=n;this.data=m;this.form=this.fb.group({baseAmount:[null,U.required],type:["quarterly",U.required]})}form;onSubmit(){let{baseAmount:a,type:n}=this.form.value,m=0;n==="quarterly"?m=a:m=a*4,console.log("Computed Total Due:",m),this.dialogRef.close(m)}onCancel(){this.dialogRef.close()}static \u0275fac=function(n){return new(n||t)(c(j),c($),c(q))};static \u0275cmp=T({type:t,selectors:[["app-tax-due-dialog"]],decls:17,vars:2,consts:[["mat-dialog-title",""],[3,"ngSubmit","formGroup"],["matInput","","formControlName","baseAmount","required",""],["formControlName","type"],["value","quarterly"],["value","annually"],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(n,m){n&1&&(e(0,"h2",0),o(1,"Compute Tax Due"),i(),e(2,"form",1),_("ngSubmit",function(){return m.onSubmit()}),e(3,"mat-form-field")(4,"mat-label"),o(5,"Base Amount"),i(),f(6,"input",2),i(),e(7,"mat-radio-group",3)(8,"mat-radio-button",4),o(9,"Quarterly"),i(),e(10,"mat-radio-button",5),o(11,"Annually"),i()(),e(12,"div",6)(13,"button",7),_("click",function(){return m.onCancel()}),o(14,"Cancel"),i(),e(15,"button",8),o(16,"Compute"),i()()()),n&2&&(l(2),u("formGroup",m.form),l(13),u("disabled",!m.form.valid))},dependencies:[L,S,g,b,h,Nt,Rt,Ft,v,M,B,O,R,F,N,V,P,k],styles:["[_nghost-%COMP%]{display:block}.mat-dialog-container[_ngcontent-%COMP%]{min-width:340px;max-width:95vw;padding:32px 24px 24px!important;box-sizing:border-box}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:32px;margin-bottom:8px;align-items:center}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:16px}"]})};function Ht(t,a){if(t&1&&(e(0,"mat-option",21),o(1),i()),t&2){let n=a.$implicit;u("value",n),l(),d(" ",n," ")}}function Yt(t,a){if(t&1&&(e(0,"mat-option",21),o(1),i()),t&2){let n=a.$implicit;u("value",n.name),l(),d(" ",n.name," ")}}var z=class t{constructor(a,n,m,r,p){this.fb=a;this.dialogRef=n;this.dialog=m;this.assessmentService=r;this.data=p;this.isEditMode=!!p.Id,this.form=this.fb.group({assessmentId:[p.assessmentId||null],taxYear:[p.taxYear||null],basicTax:[p.basicTax||0],sefTax:[p.sefTax||0],idleLandTax:[p.idleLandTax||0],totalDue:[p.totalDue||0],discountApplied:[p.discount||0],penalty:[p.penalty||0],finalAmount:[p.finalAmount||0],status:[p.status||""]}),this.loadAssessmentIdsWithAssessor()}form;isEditMode;assessmentIdsWithAssessor=[];taxStatusOptions=[{name:"Computted"},{name:"Rejected"},{name:"Delinquent"},{name:"Inactive"}];loadAssessmentIdsWithAssessor(){this.assessmentService.getAllAssessment().subscribe(a=>{this.assessmentIdsWithAssessor=a.filter(n=>!!n.assessedBy).map(n=>n.assessmentId)})}openTaxDueDialog(){this.dialog.open(Y,{width:"350px"}).afterClosed().subscribe(n=>{n!=null&&this.form.patchValue({totalDue:n})})}onSubmit(){this.form.valid&&this.dialogRef.close(this.form.value)}onCancel(){this.dialogRef.close()}static \u0275fac=function(n){return new(n||t)(c(j),c($),c(Q),c(H),c(q))};static \u0275cmp=T({type:t,selectors:[["app-tax-computation-dialog"]],decls:68,vars:6,consts:[[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"full-width"],["formControlName","assessmentId","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","taxYear","type","number"],["matTextSuffix",""],["matInput","","formControlName","basicTax","type","number"],["matInput","","formControlName","sefTax","type","number"],["matInput","","formControlName","idleLandTax","type","number"],["matInput","","formControlName","discountApplied","type","number"],["matInput","","formControlName","penalty","type","number"],["matTextPrefix",""],["matInput","","formControlName","totalDue","readonly","",3,"click"],["matInput","","formControlName","finalAmount"],["formControlName","status"],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"],[3,"value"]],template:function(n,m){n&1&&(e(0,"div",0)(1,"h2",1),o(2),i(),e(3,"form",2),_("ngSubmit",function(){return m.onSubmit()}),e(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),o(7,"Assessment Id"),i(),e(8,"mat-select",5),s(9,Ht,2,2,"mat-option",6),i()(),e(10,"mat-form-field",4)(11,"mat-label"),o(12,"Tax Year"),i(),f(13,"input",7),e(14,"span",8),o(15,"%"),i()(),e(16,"mat-form-field",4)(17,"mat-label"),o(18,"Basic Tax"),i(),f(19,"input",9),e(20,"span",8),o(21,"%"),i()(),e(22,"mat-form-field",4)(23,"mat-label"),o(24,"Sef Tax"),i(),f(25,"input",10),e(26,"span",8),o(27,"%"),i()(),e(28,"mat-form-field",4)(29,"mat-label"),o(30,"Idle Land Tax"),i(),f(31,"input",11),e(32,"span",8),o(33,"%"),i()(),e(34,"mat-form-field",4)(35,"mat-label"),o(36,"Discount Applied"),i(),f(37,"input",12),e(38,"span",8),o(39,"%"),i()(),e(40,"mat-form-field",4)(41,"mat-label"),o(42,"Penalty"),i(),f(43,"input",13),e(44,"span",8),o(45,"%"),i()(),e(46,"mat-form-field",4)(47,"mat-label"),o(48,"Total Due"),i(),e(49,"span",14),o(50,"Php:"),i(),e(51,"input",15),_("click",function(){return m.openTaxDueDialog()}),i()(),e(52,"mat-form-field",4)(53,"mat-label"),o(54,"Final Amount"),i(),e(55,"span",14),o(56,"Php: "),i(),f(57,"input",16),i(),e(58,"mat-form-field",4)(59,"mat-label"),o(60,"Tax Status"),i(),e(61,"mat-select",17),s(62,Yt,2,2,"mat-option",6),i()()(),e(63,"div",18)(64,"button",19),_("click",function(){return m.onCancel()}),o(65,"Cancel"),i(),e(66,"button",20),o(67),i()()()()),n&2&&(l(2),d("",m.isEditMode?"Edit":"Add"," Tax Computation"),l(),u("formGroup",m.form),l(6),u("ngForOf",m.assessmentIdsWithAssessor),l(53),u("ngForOf",m.taxStatusOptions),l(4),u("disabled",!m.form.valid),l(),Z(m.isEditMode?"Update":"Create"))},dependencies:[it,et,B,O,R,nt,F,N,V,P,k,b,h,S,g,at,ot,wt,L,v,M,It,Et,At,ht,St,gt],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px}.full-width[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.dialog-actions[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end;gap:12px}"]})};var zt=["dynamicComponentContainer"],Wt=()=>[5,10,25,100];function Ut(t,a){t&1&&(e(0,"th",28),o(1,"Tax ID "),i())}function Jt(t,a){if(t&1&&(e(0,"td",29),o(1),i()),t&2){let n=a.$implicit;l(),d(" ",n.Id," ")}}function Kt(t,a){t&1&&(e(0,"th",28),o(1,"Assessment Id "),i())}function Xt(t,a){if(t&1&&(e(0,"td",29),o(1),i()),t&2){let n=a.$implicit;l(),d(" ",n.assessmentId," ")}}function Zt(t,a){t&1&&(e(0,"th",28),o(1,"Tax Year "),i())}function te(t,a){if(t&1&&(e(0,"td",29),o(1),i()),t&2){let n=a.$implicit;l(),d(" ",n.taxYear," ")}}function ee(t,a){t&1&&(e(0,"th",28),o(1,"Basic tax "),i())}function ie(t,a){if(t&1&&(e(0,"td",29),o(1),i()),t&2){let n=a.$implicit;l(),d(" ",n.basicTax," ")}}function ne(t,a){t&1&&(e(0,"th",28),o(1,"Sef-tax"),i())}function ae(t,a){if(t&1&&(e(0,"td",29),o(1),i()),t&2){let n=a.$implicit;l(),d(" ",n.taxAmount," ")}}function oe(t,a){t&1&&(e(0,"th",28),o(1,"Idle Land Tax "),i())}function me(t,a){if(t&1&&(e(0,"td",29),o(1),i()),t&2){let n=a.$implicit;l(),d(" ",n.idleLandTax," ")}}function le(t,a){t&1&&(e(0,"th",28),o(1,"Total due "),i())}function re(t,a){if(t&1&&(e(0,"td",29),o(1),i()),t&2){let n=a.$implicit;l(),d(" ",n.totalDue," ")}}function pe(t,a){t&1&&(e(0,"th",28),o(1,"Discount Applied"),i())}function se(t,a){if(t&1&&(e(0,"td",29),o(1),i()),t&2){let n=a.$implicit;l(),d(" ",n.discount," ")}}function de(t,a){t&1&&(e(0,"th",28),o(1,"Penalty "),i())}function ue(t,a){if(t&1&&(e(0,"td",29),o(1),i()),t&2){let n=a.$implicit;l(),d(" ",n.penalty," ")}}function ce(t,a){t&1&&(e(0,"th",28),o(1,"Final Amount "),i())}function fe(t,a){if(t&1&&(e(0,"td",29),o(1),i()),t&2){let n=a.$implicit;l(),d(" ",n.finalAmount," ")}}function xe(t,a){t&1&&(e(0,"th",28),o(1,"Tax Status "),i())}function Ce(t,a){if(t&1&&(e(0,"td",29),o(1),i()),t&2){let n=a.$implicit;l(),d(" ",n.status," ")}}function _e(t,a){t&1&&(e(0,"th",30),o(1," Action "),i())}function Te(t,a){if(t&1){let n=W();e(0,"td",31)(1,"button",32),_("click",function(){let r=D(n).$implicit,p=A();return y(p.openDialog(r))}),e(2,"mat-icon"),o(3,"edit"),i()(),e(4,"button",33),_("click",function(){let r=D(n).$implicit,p=A();return y(p.deleteTax(r.id))}),e(5,"mat-icon"),o(6,"delete"),i()()()}}function ge(t,a){t&1&&f(0,"tr",34)}function Se(t,a){t&1&&f(0,"tr",35)}function he(t,a){if(t&1&&(e(0,"tr",36)(1,"td",37),o(2),i()()),t&2){A();let n=X(11);l(2),d('No data matching the filter "',n.value,'"')}}var Gt=class t{constructor(a,n,m){this.taxComputationService=a;this.dialog=n;this.assessmentService=m}displayedColumns=["taxYear","basicTax","sefTax","idleLandTax","totalDue","discount","penalty","finalAmount","status","actions"];dataSource;paginator;sort;table;container;ngOnInit(){this.loadTax()}loadTax(){this.taxComputationService.getAllTax().subscribe(a=>{this.dataSource=new Tt(a),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(a){let n=a.target.value;this.dataSource.filter=n.trim().toLocaleLowerCase()}openDialog(a){this.dialog.open(z,{data:a||{}}).afterClosed().subscribe(m=>{m&&(m.id?this.taxComputationService.updateTax(m).subscribe(()=>{this.loadTax()}):this.taxComputationService.createTax(m).subscribe(()=>{this.loadTax()}))})}deleteTax(a){confirm("Are you sure you want to delete this Tax?")&&this.taxComputationService.deleteTax(a).subscribe(()=>{this.loadTax()})}static \u0275fac=function(n){return new(n||t)(c(Ot),c(Q),c(H))};static \u0275cmp=T({type:t,selectors:[["app-tax-computation"]],viewQuery:function(n,m){if(n&1&&(E(J,5),E(vt,5),E(G,5),E(zt,5,K)),n&2){let r;I(r=w())&&(m.paginator=r.first),I(r=w())&&(m.sort=r.first),I(r=w())&&(m.table=r.first),I(r=w())&&(m.container=r.first)}},decls:54,vars:5,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",3,"click"],[1,"full-width"],["matInput","","placeholder","Search Tax Declaration...",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","assessmentId"],["matColumnDef","taxYear"],["matColumnDef","basicTax"],["matColumnDef","sefTax"],["matColumnDef","idleLandTax"],["matColumnDef","totalDue"],["matColumnDef","discount"],["matColumnDef","penalty"],["matColumnDef","finalAmount"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary","matTooltip","Edit Tax",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete Tax",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(n,m){if(n&1){let r=W();e(0,"div",1)(1,"div")(2,"h1",2),o(3,"Tax Declaration"),i(),e(4,"button",3),_("click",function(){return D(r),y(m.openDialog())}),o(5,"Add Tax"),i()(),e(6,"div")(7,"mat-form-field",4)(8,"mat-label"),o(9,"Filter"),i(),e(10,"input",5,0),_("keyup",function($t){return D(r),y(m.applyFilter($t))}),i()()(),e(12,"div",6)(13,"table",7),x(14,8),s(15,Ut,2,0,"th",9)(16,Jt,2,1,"td",10),C(),x(17,11),s(18,Kt,2,0,"th",9)(19,Xt,2,1,"td",10),C(),x(20,12),s(21,Zt,2,0,"th",9)(22,te,2,1,"td",10),C(),x(23,13),s(24,ee,2,0,"th",9)(25,ie,2,1,"td",10),C(),x(26,14),s(27,ne,2,0,"th",9)(28,ae,2,1,"td",10),C(),x(29,15),s(30,oe,2,0,"th",9)(31,me,2,1,"td",10),C(),x(32,16),s(33,le,2,0,"th",9)(34,re,2,1,"td",10),C(),x(35,17),s(36,pe,2,0,"th",9)(37,se,2,1,"td",10),C(),x(38,18),s(39,de,2,0,"th",9)(40,ue,2,1,"td",10),C(),x(41,19),s(42,ce,2,0,"th",9)(43,fe,2,1,"td",10),C(),x(44,20),s(45,xe,2,0,"th",9)(46,Ce,2,1,"td",10),C(),x(47,21),s(48,_e,2,0,"th",22)(49,Te,7,0,"td",23),C(),s(50,ge,1,0,"tr",24)(51,Se,1,0,"tr",25)(52,he,3,1,"tr",26),i(),f(53,"mat-paginator",27),i()()}n&2&&(l(13),u("dataSource",m.dataSource),l(37),u("matHeaderRowDef",m.displayedColumns),l(),u("matRowDefColumns",m.displayedColumns),l(2),u("pageSizeOptions",tt(4,Wt)))},dependencies:[S,b,h,g,_t,G,rt,ut,pt,lt,ct,st,dt,ft,xt,Ct,yt,Dt,J,v,M,mt,Mt,bt],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}"]})};export{Gt as TaxComputationComponent};
