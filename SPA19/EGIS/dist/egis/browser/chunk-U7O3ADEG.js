import{a as zt}from"./chunk-HGMN7EGA.js";import{a as qt}from"./chunk-ZSWPU5YM.js";import"./chunk-F5X5MWHG.js";import{a as $t,b as jt,c as V,e as Ht}from"./chunk-2IGJZFV7.js";import{a as xt,b as Mt,c as Dt,e as wt,h as yt}from"./chunk-KGOMAVQY.js";import{a as A,b as Tt,c as Et,e as Pt,f as Ot,h as kt,i as Bt,k as Rt,l as At,n as Ft,o as Lt,p as Vt,q as Nt}from"./chunk-NFABPVPM.js";import{a as ut,b as gt,c as _t,h as It}from"./chunk-3KDABX7K.js";import{c as Ct,d as ht}from"./chunk-RC2IBETA.js";import"./chunk-SYAC655V.js";import"./chunk-ECBSDO4K.js";import{a as dt,b as ft}from"./chunk-DQWGBFJK.js";import"./chunk-MS4AQ6UA.js";import{a as St,b as vt}from"./chunk-LB6LRJVS.js";import{f as bt}from"./chunk-YBNMVR6Q.js";import{a as lt,b as E,c as P}from"./chunk-AWMIQM5V.js";import"./chunk-O27SARHL.js";import"./chunk-3RK6DDJD.js";import"./chunk-SGYCFQGT.js";import{a as st}from"./chunk-HSUA2CKH.js";import{a as W}from"./chunk-TMATL23G.js";import{b as X,g as Z,h as tt,ha as O,ia as pt,la as mt,m as et,oa as k,p as it,pa as ct,q as nt,s as ot,ta as B,ua as R,v as at,x as rt}from"./chunk-FPYKYBTQ.js";import{Db as o,Eb as n,Fb as C,Gb as I,Hb as b,Jb as S,Jc as Y,Kc as J,Lb as _,Mb as w,Nc as K,Qb as v,Rb as x,Rc as T,Sb as M,Vb as y,Wb as r,Xb as q,Y as $,Ya as l,Yb as s,a as N,ba as j,bb as g,cc as z,db as H,dc as Q,gc as U,ib as D,ic as G,ka as f,la as u,nb as c,ub as m}from"./chunk-NKHI3LCY.js";function Xt(e,t){if(e&1&&(o(0,"mat-option",18),r(1),n()),e&2){let i=t.$implicit;m("value",i),l(),s(" ",i," ")}}function Zt(e,t){if(e&1&&(o(0,"mat-option",18),r(1),n()),e&2){let i=t.$implicit;m("value",i.id),l(),s(" ",i.name," ")}}function te(e,t){if(e&1&&(o(0,"mat-option",18),r(1),n()),e&2){let i=t.$implicit;m("value",i.name),l(),s(" ",i.name," ")}}function ee(e,t){if(e&1&&(o(0,"mat-option",18),r(1),n()),e&2){let i=t.$implicit;m("value",i.value),l(),s(" ",i.label," ")}}function ie(e,t){e&1&&(o(0,"mat-error"),r(1,"Status is required"),n())}function ne(e,t){e&1&&(o(0,"mat-error"),r(1,"Date of Inspection is required"),n())}var F=class e{constructor(t,i,a,p,d){this.fb=t;this.dialogRef=i;this.data=a;this.bpltasapplicationService=p;this.bpltasuserService=d;this.isEditMode=!!a.id,this.form=this.fb.group({id:[a.id],inspectorId:[null],applicationId:[a.applicationId||"",[]],inspectionDate:[a.inspectionDate||"",[]],inspectionResult:[a.inspectionResult||"",[]],inspectionStatus:[a.inspectionStatus||"",[]],remarks:[a.remarks||"",[]]}),this.loadOwner(),this.loadApplicationIds()}form;isEditMode;userInspector="Inspector";forInspection="For Inspection";users=[];selectedUser=null;applicationIds=[];inspectionStatusOptions=[{value:!0,label:"Active"},{value:!1,label:"Inactive"}];inspectionResultOptions=[{name:"Passed"},{name:"For Verification"},{name:"Faileld"}];loadOwner(){this.bpltasuserService.getUserIDName(this.userInspector).subscribe(t=>{this.users=t})}loadApplicationIds(){this.bpltasapplicationService.getApplicationIds(this.forInspection).subscribe(t=>{this.applicationIds=t})}onSelectedInspector(t){let i=this.users.find(a=>a.id===t);this.selectedUser=i||null,this.form.patchValue({payerId:t})}onSubmit(){let t=N({},this.form.value);if(this.form.valid){if(t.inspectionDate instanceof Date){let i=t.inspectionDate.getFullYear(),a=String(t.inspectionDate.getMonth()+1).padStart(2,"0"),p=String(t.inspectionDate.getDate()).padStart(2,"0");t.inspectionDate=`${i}-${a}-${p}`}this.dialogRef.close(t),console.log("Form submitted with value:",t.inspectionDate,t.inspectionResult,t.inspectionStatus)}}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||e)(g(at),g(xt),g(Mt),g(zt),g(qt))};static \u0275cmp=D({type:e,selectors:[["app-inspection-dialog"]],features:[z([ht()])],decls:43,vars:12,consts:[["picker",""],[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"full-width"],["formControlName","applicationId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","inspectorId",3,"selectionChange"],["formControlName","inspectionResult","required",""],["formControlName","inspectionStatus","required",""],[4,"ngIf"],["matInput","","formControlName","inspectionDate",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","remarks","rows","4"],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"],[3,"value"]],template:function(i,a){if(i&1){let p=S();o(0,"div",1)(1,"h2",2),r(2),n(),o(3,"form",3),_("ngSubmit",function(){return f(p),u(a.onSubmit())}),o(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),r(7,"Select Application No.:"),n(),o(8,"mat-select",6),c(9,Xt,2,2,"mat-option",7),n()(),o(10,"mat-form-field",5)(11,"mat-label"),r(12,"Select Inspector"),n(),o(13,"mat-select",8),_("selectionChange",function(h){return f(p),u(a.onSelectedInspector(h.value))}),c(14,Zt,2,2,"mat-option",7),n()(),o(15,"mat-form-field",5)(16,"mat-label"),r(17,"Inspection Result"),n(),o(18,"mat-select",9),c(19,te,2,2,"mat-option",7),n()(),o(20,"mat-form-field",5)(21,"mat-label"),r(22,"Status"),n(),o(23,"mat-select",10),c(24,ee,2,2,"mat-option",7),n(),c(25,ie,2,0,"mat-error",11),n(),o(26,"mat-form-field",5)(27,"mat-label"),r(28,"Date of Inspection"),n(),C(29,"input",12)(30,"mat-datepicker-toggle",13)(31,"mat-datepicker",null,0),c(33,ne,2,0,"mat-error",11),n(),o(34,"mat-form-field",5)(35,"mat-label"),r(36,"Remarks"),n(),C(37,"textarea",14),n()(),o(38,"div",15)(39,"button",16),_("click",function(){return f(p),u(a.onCancel())}),r(40,"Cancel"),n(),o(41,"button",17),r(42),n()()()()}if(i&2){let p,d,h=y(32);l(2),s("",a.isEditMode?"Edit":"Add"," Payment"),l(),m("formGroup",a.form),l(6),m("ngForOf",a.applicationIds),l(5),m("ngForOf",a.users),l(5),m("ngForOf",a.inspectionResultOptions),l(5),m("ngForOf",a.inspectionStatusOptions),l(),m("ngIf",(p=a.form.get("status"))==null?null:p.hasError("required")),l(4),m("matDatepicker",h),l(),m("for",h),l(3),m("ngIf",(d=a.form.get("inspectionDate"))==null?null:d.hasError("required")),l(8),m("disabled",!a.form.valid),l(),q(a.isEditMode?"Update":"Create")}},dependencies:[T,Y,J,rt,et,X,Z,tt,ot,it,nt,R,B,k,O,pt,mt,It,ut,gt,_t,ct,P,E,yt,wt,Ct,vt,St,bt],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px;background:transparent!important;box-shadow:none!important}.full-width[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.dialog-actions[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end;gap:12px}  .mat-dialog-container{background:#ffffff80!important;box-shadow:0 8px 32px #0000002e;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}  .mat-form-field-appearance-fill .mat-form-field-flex,   .mat-form-field-appearance-fill .mat-form-field-infix,   .mat-form-field-appearance-fill .mat-form-field-outline,   .mat-form-field-wrapper,   .mat-form-field-flex,   .mat-form-field-infix,   .mat-input-element,   .mat-select-trigger,   .mat-select-value,   .mat-select,   input.mat-input-element,   textarea.mat-input-element{background:transparent!important;box-shadow:none!important}"],changeDetection:0})};var L=class e{constructor(t){this.http=t}apibaseurl=st.bpltasApiBaseURL;getInspection(){return this.http.get(this.apibaseurl+"/BPLTASInspection")}updateInspection(t){return this.http.put(`${this.apibaseurl+"/BPLTASInspection"}/${t.id}`,t)}createInspection(t){return t.id=0,this.http.post(this.apibaseurl+"/BPLTASInspection/Create",t)}deleteInspection(t){return this.http.delete(`${this.apibaseurl+"/BPLTASInspection"}/${t}`)}static \u0275fac=function(i){return new(i||e)(j(W))};static \u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"})};var ae=["dynamicComponentContainer"],re=()=>[5,10,25,100];function le(e,t){e&1&&(o(0,"th",24),r(1," ID"),n())}function pe(e,t){if(e&1&&(o(0,"td",25),r(1),n()),e&2){let i=t.$implicit;l(),s(" ",i.id," ")}}function me(e,t){e&1&&(o(0,"th",24),r(1," Inspector ID"),n())}function ce(e,t){if(e&1&&(o(0,"td",25),r(1),n()),e&2){let i=t.$implicit;l(),s(" ",i.inspectorId," ")}}function se(e,t){e&1&&(o(0,"th",24),r(1," Application ID"),n())}function de(e,t){if(e&1&&(o(0,"td",25),r(1),n()),e&2){let i=t.$implicit;l(),s(" ",i.applicationId," ")}}function fe(e,t){e&1&&(o(0,"th",24),r(1," Date of Inspection "),n())}function ue(e,t){if(e&1&&(o(0,"td",25),r(1),U(2,"date"),n()),e&2){let i=t.$implicit;l(),s(" ",G(2,1,i.inspectionDate,"shortDate")," ")}}function ge(e,t){e&1&&(o(0,"th",24),r(1," Inspection Result "),n())}function _e(e,t){if(e&1&&(o(0,"td",25),r(1),n()),e&2){let i=t.$implicit;l(),s(" ",i.inspectionResult," ")}}function Ie(e,t){e&1&&(o(0,"th",24),r(1," Inspection Status "),n())}function be(e,t){if(e&1&&(o(0,"td",25),r(1),n()),e&2){let i=t.$implicit;l(),s(" ",i.inspectionStatus," ")}}function Ce(e,t){e&1&&(o(0,"th",24),r(1," Remarks "),n())}function he(e,t){if(e&1&&(o(0,"td",25),r(1),n()),e&2){let i=t.$implicit;l(),s(" ",i.remarks," ")}}function Se(e,t){e&1&&(o(0,"th",26),r(1," Action "),n())}function ve(e,t){if(e&1){let i=S();o(0,"td",27)(1,"button",28),_("click",function(){let p=f(i).$implicit,d=w();return u(d.openDialog(p))}),o(2,"mat-icon"),r(3,"edit"),n()(),o(4,"button",29),_("click",function(){let p=f(i).$implicit,d=w();return u(d.deleteInspection(p.id))}),o(5,"mat-icon"),r(6,"delete"),n()()()}}function xe(e,t){e&1&&C(0,"tr",30)}function Me(e,t){e&1&&C(0,"tr",31)}function De(e,t){if(e&1&&(o(0,"tr",32)(1,"td",33),r(2),n()()),e&2){w();let i=y(13);l(2),s('No data matching the filter "',i.value,'"')}}var Ut=class e{constructor(t,i){this.bpltasinspectionService=t;this.dialog=i}showSubCode=!1;selectedMasterCode;selectedDescription;displayedColumns=["inspectorId","applicationId","inspectionDate","inspectionResult","inspectionStatus","remarks","actions"];dataSource;paginator;sort;table;container;ngOnInit(){this.loadInspection()}loadInspection(){this.bpltasinspectionService.getInspection().subscribe(t=>{console.log(t),this.dataSource=new Nt(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(t){let i=t.target.value;this.dataSource.filter=i.trim().toLocaleLowerCase()}openDialog(t){this.dialog.open(F,{data:t||{}}).afterClosed().subscribe(a=>{a&&(a.id?(console.log("for edit",a),this.bpltasinspectionService.updateInspection(a).subscribe(()=>{this.loadInspection()})):(console.log("for create",a),this.bpltasinspectionService.createInspection(a).subscribe(()=>{this.loadInspection()})))})}deleteInspection(t){confirm("Are you sure you want to delete this inspection?")&&this.bpltasinspectionService.deleteInspection(t).subscribe(()=>{this.loadInspection()})}static \u0275fac=function(i){return new(i||e)(g(L),g(Dt))};static \u0275cmp=D({type:e,selectors:[["app-inspection"]],viewQuery:function(i,a){if(i&1&&(v(V,5),v(Ht,5),v(A,5),v(ae,5,H)),i&2){let p;x(p=M())&&(a.paginator=p.first),x(p=M())&&(a.sort=p.first),x(p=M())&&(a.table=p.first),x(p=M())&&(a.container=p.first)}},decls:44,vars:5,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",1,"load-batch-btn",3,"click"],[1,"full-width"],["matInput","","placeholder","Search inpections..",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","inspectorId"],["matColumnDef","applicationId"],["matColumnDef","inspectionDate"],["matColumnDef","inspectionResult"],["matColumnDef","inspectionStatus"],["matColumnDef","remarks"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of inspections",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary","matTooltip","Edit Inspection",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete Inspection",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,a){if(i&1){let p=S();o(0,"div",1)(1,"div")(2,"h1",2),r(3,"Inspections"),n(),r(4," \xA0 "),o(5,"button",3),_("click",function(){return f(p),u(a.openDialog())}),r(6,"Add Inspection"),n()(),r(7," \xA0 "),o(8,"div")(9,"mat-form-field",4)(10,"mat-label"),r(11,"Filter"),n(),o(12,"input",5,0),_("keyup",function(h){return f(p),u(a.applyFilter(h))}),n()()(),o(14,"div",6)(15,"table",7),I(16,8),c(17,le,2,0,"th",9)(18,pe,2,1,"td",10),b(),I(19,11),c(20,me,2,0,"th",9)(21,ce,2,1,"td",10),b(),I(22,12),c(23,se,2,0,"th",9)(24,de,2,1,"td",10),b(),o(25,"ng-contaainer",13),c(26,fe,2,0,"th",9)(27,ue,3,4,"td",10),n(),I(28,14),c(29,ge,2,0,"th",9)(30,_e,2,1,"td",10),b(),I(31,15),c(32,Ie,2,0,"th",9)(33,be,2,1,"td",10),b(),I(34,16),c(35,Ce,2,0,"th",9)(36,he,2,1,"td",10),b(),I(37,17),c(38,Se,2,0,"th",18)(39,ve,7,0,"td",19),b(),c(40,xe,1,0,"tr",20)(41,Me,1,0,"tr",21)(42,De,3,1,"tr",22),n(),C(43,"mat-paginator",23),n()()}i&2&&(l(15),m("dataSource",a.dataSource),l(25),m("matHeaderRowDef",a.displayedColumns),l(),m("matRowDefColumns",a.displayedColumns),l(2),m("pageSizeOptions",Q(4,re)))},dependencies:[k,R,B,O,Vt,A,Et,Bt,Pt,Tt,Rt,Ot,kt,At,Ft,Lt,ft,dt,V,P,E,lt,jt,$t,T,K],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px;border:1.5px solid #e0e0e0;border-radius:10px;padding:24px;background:transparent;box-shadow:none}.load-batch-btn[_ngcontent-%COMP%]{height:50px;min-width:120px;margin-left:8px;background:#4169e1!important;color:#fff!important;font-weight:600;font-size:16px;border-radius:8px;box-shadow:0 2px 8px #4169e126;transition:background .2s,box-shadow .2s,transform .1s;letter-spacing:.5px;border:none;display:flex;align-items:left;justify-content:center;padding:0 24px;margin-bottom:24px}.load-batch-btn[_ngcontent-%COMP%]:hover, .load-batch-btn[_ngcontent-%COMP%]:focus{background:#274bb5!important;box-shadow:0 4px 16px #4169e140;transform:translateY(-2px) scale(1.03)}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{background:transparent!important}.mat-elevation-z8[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important}  .mat-paginator,   .mat-paginator-container,   .mat-paginator-outer-container,   .mat-paginator-range-actions,   .mat-paginator-page-size,   .mat-paginator-page-size-label,   .mat-paginator-range-label,   .mat-paginator-navigation-previous,   .mat-paginator-navigation-next,   .mat-paginator-page-size-select,   .mat-paginator-page-size-select .mat-select-trigger,   .mat-paginator-page-size-select .mat-select-value,   .paginator-row,   div[style*=background],   .mat-mdc-paginator,   .mat-mdc-paginator-container,   .mat-mdc-paginator-range-actions{background:transparent!important;box-shadow:none!important}  .mat-paginator,   .mat-paginator-container,   .mat-paginator-outer-container,   .mat-mdc-paginator,   .mat-mdc-paginator-container{background:transparent!important;box-shadow:none!important;border:none!important}"]})};export{Ut as InspectionComponent};
