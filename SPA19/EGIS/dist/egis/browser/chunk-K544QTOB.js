import{a as L}from"./chunk-UFX6ZKHS.js";import{a as G}from"./chunk-7MYEMUVZ.js";import"./chunk-MS4AQ6UA.js";import"./chunk-LB6LRJVS.js";import"./chunk-YBNMVR6Q.js";import"./chunk-HSUA2CKH.js";import"./chunk-TMATL23G.js";import{b as P,d as p,g as E,h as N,ha as B,j as v,l as F,m as V,oa as O,s as I,t as W,ta as T,ua as D,v as U,w as q}from"./chunk-FPYKYBTQ.js";import{$b as g,Db as o,Eb as n,Jb as b,Lb as h,Vb as w,Wb as d,Ya as s,_b as u,a as c,ac as y,bb as M,ib as C,ka as l,la as m,ub as S}from"./chunk-NKHI3LCY.js";var j=class _{constructor(t,r){this.fb=t;this.mayorsProfileService=r;this.profileForm=this.fb.group({firstName:["",p.required],lastName:["",p.required],email:["",[p.required,p.email]],contactNo:["",p.required]})}profileForm;mayor=null;user={firstName:"",middleName:"",email:"",address:null};onFileSelected(t){let r=t.target;if(r.files&&r.files.length>0){let e=r.files[0];this.mayor&&this.mayorsProfileService.updateMayorsProfile(this.mayor.id,e,this.mayor).subscribe(a=>{},a=>{})}}onImageUploaded(t){if(this.mayor){let r=new File([t],"photo.png",{type:t.type});this.mayorsProfileService.updateMayorsProfile(this.mayor.id,r,this.mayor).subscribe(e=>{},e=>{})}}ngOnInit(){this.loadUserData()}loadUserData(){this.mayor&&this.mayor.id&&this.mayorsProfileService.getMayorsProfile(this.mayor.id).subscribe(t=>{this.mayor=t,this.profileForm.patchValue(t)})}onSubmit(){if(this.profileForm.valid){let t=c(c({},this.mayor),this.profileForm.value);this.mayorsProfileService.updateMayorsProfile(t.id,new File([],""),t).subscribe(()=>{},r=>{})}}static \u0275fac=function(r){return new(r||_)(M(U),M(G))};static \u0275cmp=C({type:_,selectors:[["app-mayors-profile-edit"]],decls:21,vars:5,consts:[["profileForm","ngForm"],[1,"profile-edit-container"],[3,"ngSubmit"],["appearance","fill"],["matInput","","name","firstName","required","",3,"ngModelChange","ngModel"],["matInput","","name","middleName","required","",3,"ngModelChange","ngModel"],["matInput","","name","email","required","","email","",3,"ngModelChange","ngModel"],["name","address",3,"ngModelChange","ngModel"],[3,"photoUploaded"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(r,e){if(r&1){let a=b();o(0,"div",1)(1,"h2"),d(2,"Edit Profile"),n(),o(3,"form",2,0),h("ngSubmit",function(){return l(a),m(e.onSubmit())}),o(5,"mat-form-field",3)(6,"mat-label"),d(7,"First Name"),n(),o(8,"input",4),y("ngModelChange",function(i){return l(a),g(e.user.firstName,i)||(e.user.firstName=i),m(i)}),n()(),o(9,"mat-form-field",3)(10,"mat-label"),d(11,"Middle Name"),n(),o(12,"input",5),y("ngModelChange",function(i){return l(a),g(e.user.middleName,i)||(e.user.middleName=i),m(i)}),n()(),o(13,"mat-form-field",3)(14,"mat-label"),d(15,"Email"),n(),o(16,"input",6),y("ngModelChange",function(i){return l(a),g(e.user.email,i)||(e.user.email=i),m(i)}),n()(),o(17,"app-personal-info-form",7),y("ngModelChange",function(i){return l(a),g(e.user.address,i)||(e.user.address=i),m(i)}),n(),o(18,"app-mayors-photo-upload",8),h("photoUploaded",function(i){return l(a),m(e.onImageUploaded(i))}),n(),o(19,"button",9),d(20,"Save Changes"),n()()()}if(r&2){let a=w(4);s(8),u("ngModel",e.user.firstName),s(4),u("ngModel",e.user.middleName),s(4),u("ngModel",e.user.email),s(),u("ngModel",e.user.address),s(2),S("disabled",!a.form.valid)}},dependencies:[D,T,O,B,q,V,P,E,N,I,W,F,v,L],styles:[".profile-edit-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px}.mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.profile-edit-header[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:20px}.save-button[_ngcontent-%COMP%]{margin-top:20px}.error-message[_ngcontent-%COMP%]{color:red;margin-top:10px}"]})};export{j as MayorsProfileEditComponent};
