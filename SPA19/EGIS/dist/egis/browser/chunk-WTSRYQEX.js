import{a as Te}from"./chunk-APAXKTW3.js";import{c as k,e as Ee}from"./chunk-2IGJZFV7.js";import{a as fe,b as be,c as Ce}from"./chunk-KGOMAVQY.js";import{a as T,b as Se,c as Me,e as he,f as _e,h as ge,i as ve,k as De,l as we,n as xe,o as Ie,p as ye,q as V}from"./chunk-NFABPVPM.js";import"./chunk-ECBSDO4K.js";import{a as se,b as de}from"./chunk-DQWGBFJK.js";import"./chunk-MS4AQ6UA.js";import{a as ue,b as pe}from"./chunk-LB6LRJVS.js";import{f as ce}from"./chunk-YBNMVR6Q.js";import{a as ie,b as oe,c as re}from"./chunk-AWMIQM5V.js";import{a as L,c as z}from"./chunk-FE5V2QVG.js";import"./chunk-O27SARHL.js";import"./chunk-3RK6DDJD.js";import{c as ae}from"./chunk-BUEFDGFJ.js";import"./chunk-SGYCFQGT.js";import{a as me}from"./chunk-HSUA2CKH.js";import{a as B}from"./chunk-TMATL23G.js";import{b as U,g as J,h as K,ha as x,ia as ne,m as W,oa as I,p as X,pa as le,q as Y,s as Z,ta as y,ua as E,v as ee,x as te}from"./chunk-FPYKYBTQ.js";import{Db as r,Eb as a,Fb as b,Gb as M,Hb as h,Jb as F,Jc as q,Kc as G,Lb as p,Mb as g,Qb as v,Rb as D,Rc as Q,Sb as w,Vb as P,Wb as n,Xb as A,Y as j,Ya as m,Yb as f,Zb as H,ba as N,bb as u,dc as $,ib as _,ka as C,la as S,nb as c,ub as s}from"./chunk-NKHI3LCY.js";function Ne(t,e){if(t&1&&(r(0,"mat-option",12),n(1),a()),t&2){let i=e.$implicit;s("value",i.code),m(),f(" ",i.code," ")}}function Pe(t,e){t&1&&(r(0,"mat-error"),n(1,"Sub Code is required"),a())}function Ae(t,e){t&1&&(r(0,"mat-error"),n(1,"Description is required"),a())}var R=class t{constructor(e,i,o,l){this.fb=e;this.dialogRef=i;this.data=o;this.mastercodeService=l;this.isEditMode=!!o.id,this.form=this.fb.group({id:[o.id],code:[this.mastercodeSelected],subcode:[o.subcode],description:[o.description]})}form;isEditMode;masterCodeData=[];mastercodeSelected="";ngOnInit(){this.mastercodeService.getMasteCodes().subscribe(e=>{this.masterCodeData=e,this.isEditMode&&(this.mastercodeSelected=this.data.code.toString(),this.form.patchValue({code:this.mastercodeSelected,subcode:this.data.subcode,description:this.data.description}))})}onSelectionChange(e){this.mastercodeSelected=e.value,this.form.patchValue({code:this.mastercodeSelected})}onSubmit(){this.form.valid&&this.dialogRef.close(this.form.value)}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(u(ee),u(fe),u(be),u(Te))};static \u0275cmp=_({type:t,selectors:[["app-master-sub-code-dialog"]],decls:24,vars:7,consts:[[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"full-width"],[3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","subcode","required",""],[4,"ngIf"],["matInput","","formControlName","description","required",""],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"],[3,"value"]],template:function(i,o){if(i&1&&(r(0,"div",0)(1,"h2",1),n(2),a(),r(3,"form",2),p("ngSubmit",function(){return o.onSubmit()}),r(4,"mat-form-field",3)(5,"mat-label"),n(6,"Select Code"),a(),r(7,"mat-select",4),p("selectionChange",function(d){return o.onSelectionChange(d)}),c(8,Ne,2,2,"mat-option",5),a()(),r(9,"mat-form-field",3)(10,"mat-label"),n(11,"Sub Code"),a(),b(12,"input",6),c(13,Pe,2,0,"mat-error",7),a(),r(14,"mat-form-field",3)(15,"mat-label"),n(16,"Description"),a(),b(17,"input",8),c(18,Ae,2,0,"mat-error",7),a(),r(19,"div",9)(20,"button",10),p("click",function(){return o.onCancel()}),n(21,"Cancel"),a(),r(22,"button",11),n(23),a()()()()),i&2){let l,d;m(2),f("",o.isEditMode?"Edit":"Add"," Master Sub Table Code"),m(),s("formGroup",o.form),m(5),s("ngForOf",o.masterCodeData),m(5),s("ngIf",(l=o.form.get("subcode"))==null?null:l.hasError("required")),m(5),s("ngIf",(d=o.form.get("description"))==null?null:d.hasError("required")),m(4),s("disabled",!o.form.valid),m(),A(o.isEditMode?"Update":"Create")}},dependencies:[te,W,U,J,K,Z,X,Y,le,I,x,ne,Q,q,G,E,y,ae,pe,ue,ce],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px}.full-width[_ngcontent-%COMP%]{width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:8px}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}"]})};var O=class t{constructor(e){this.http=e}apibaseurl=me.toimsApiBaseURL;getMasterSubCodes(e){let i={code:e};return this.http.get(this.apibaseurl+"/MasterTableSubCode/GetCode/",{params:i})}updateMasterSubCode(e){return this.http.put(`${this.apibaseurl+"/MasterTableSubCode"}/${e.id}`,e)}createMasterSubCode(e){return e.id=0,this.http.post(this.apibaseurl+"/MasterTableSubCode/Create",e)}deleteMasterSubCode(e){return this.http.delete(`${this.apibaseurl+"/MasterTableSubCode"}/${e}`)}static \u0275fac=function(i){return new(i||t)(N(B))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var $e=()=>[5,10,25,100];function qe(t,e){t&1&&(r(0,"th",21),n(1," ID "),a())}function Ge(t,e){if(t&1&&(r(0,"td",22),n(1),a()),t&2){let i=e.$implicit;m(),f(" ",i.id," ")}}function Qe(t,e){t&1&&(r(0,"th",21),n(1," Code "),a())}function Be(t,e){if(t&1&&(r(0,"td",22),n(1),a()),t&2){let i=e.$implicit;m(),f(" ",i.code," ")}}function Le(t,e){t&1&&(r(0,"th",21),n(1," Sub Code "),a())}function ze(t,e){if(t&1&&(r(0,"td",22),n(1),a()),t&2){let i=e.$implicit;m(),f(" ",i.subcode," ")}}function Ue(t,e){t&1&&(r(0,"th",21),n(1," Description "),a())}function Je(t,e){if(t&1&&(r(0,"td",22),n(1),a()),t&2){let i=e.$implicit;m(),f(" ",i.description," ")}}function Ke(t,e){t&1&&(r(0,"th",23),n(1," Action "),a())}function We(t,e){if(t&1){let i=F();r(0,"td",24)(1,"button",25),p("click",function(){let l=C(i).$implicit,d=g();return S(d.openDialog(l))}),r(2,"mat-icon"),n(3,"edit"),a()(),r(4,"button",25),p("click",function(){let l=C(i).$implicit,d=g();return S(d.deleteMasterSubCode(l.id))}),r(5,"mat-icon"),n(6,"delete"),a()()()}}function Xe(t,e){t&1&&b(0,"tr",26)}function Ye(t,e){t&1&&b(0,"tr",27)}function Ze(t,e){if(t&1&&(r(0,"tr",28)(1,"td",29),n(2),a()()),t&2){g();let i=P(11);m(2),f('No data matching the filter "',i.value,'"')}}var Oe=class t{constructor(e,i,o,l){this.route=e;this.mastersubcodeService=i;this.dialog=o;this.router=l}masterCode;masterCodeDescription;showSubCode=!1;displayedColumns=["id","code","subcode","description","actions"];dataSource;paginator;sort;table;ngOnInit(){this.route.params.subscribe(e=>{this.masterCode=e.code,this.masterCodeDescription=e.description,this.mastersubcodeService.getMasterSubCodes(this.masterCode).subscribe({next:i=>{this.dataSource=new V(i)},error:i=>{console.error("Error fetching master subcodes:",i)}})})}loadMasterSubCode(){this.mastersubcodeService.getMasterSubCodes(this.masterCode).subscribe(e=>{this.dataSource=new V(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(e){let i=e.target.value;this.dataSource.filter=i.trim().toLocaleLowerCase()}openDialog(e){this.dialog.open(R,{data:e||{}}).afterClosed().subscribe(o=>{o&&(o.id?this.mastersubcodeService.updateMasterSubCode(o).subscribe(()=>{this.loadMasterSubCode()}):this.mastersubcodeService.createMasterSubCode(o).subscribe(()=>{this.loadMasterSubCode()}))})}deleteMasterSubCode(e){confirm("Are you sure you want to delete this master sub table code?")&&this.mastersubcodeService.deleteMasterSubCode(e).subscribe(()=>{this.loadMasterSubCode()})}goToMasterCode(){this.router.navigate(["/mainlayout/master"]),this.showSubCode=!0}static \u0275fac=function(i){return new(i||t)(u(L),u(O),u(Ce),u(z))};static \u0275cmp=_({type:t,selectors:[["app-master-subcode"]],viewQuery:function(i,o){if(i&1&&(v(k,5),v(Ee,5),v(T,5)),i&2){let l;D(l=w())&&(o.paginator=l.first),D(l=w())&&(o.sort=l.first),D(l=w())&&(o.table=l.first)}},decls:36,vars:7,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",3,"click"],[1,"full-width"],["matInput","","placeholder","Search master sub code...",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","subcode"],["matColumnDef","description"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,o){if(i&1){let l=F();r(0,"div",1)(1,"div")(2,"h1",2),n(3),a(),r(4,"button",3),p("click",function(){return C(l),S(o.openDialog())}),n(5,"Add Master Sub Code"),a()(),r(6,"div")(7,"mat-form-field",4)(8,"mat-label"),n(9,"Filter"),a(),r(10,"input",5,0),p("keyup",function(Fe){return C(l),S(o.applyFilter(Fe))}),a()()(),r(12,"div",6)(13,"table",7),M(14,8),c(15,qe,2,0,"th",9)(16,Ge,2,1,"td",10),h(),M(17,11),c(18,Qe,2,0,"th",9)(19,Be,2,1,"td",10),h(),M(20,12),c(21,Le,2,0,"th",9)(22,ze,2,1,"td",10),h(),M(23,13),c(24,Ue,2,0,"th",9)(25,Je,2,1,"td",10),h(),M(26,14),c(27,Ke,2,0,"th",15)(28,We,7,0,"td",16),h(),c(29,Xe,1,0,"tr",17)(30,Ye,1,0,"tr",18)(31,Ze,3,1,"tr",19),a(),b(32,"mat-paginator",20),a(),r(33,"div")(34,"button",3),p("click",function(){return C(l),S(o.goToMasterCode())}),n(35,"Go to Master Code"),a()()()}i&2&&(m(3),H("Master Sub Table Code : ",o.masterCode," - ",o.masterCodeDescription,""),m(10),s("dataSource",o.dataSource),m(16),s("matHeaderRowDef",o.displayedColumns),m(),s("matRowDefColumns",o.displayedColumns),m(2),s("pageSizeOptions",$(6,$e)))},dependencies:[I,E,y,x,ye,T,Me,ve,he,Se,De,_e,ge,we,xe,Ie,de,se,k,re,oe,ie],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}"]})};export{Oe as MasterSubcodeComponent};
