import"./chunk-F5X5MWHG.js";import{a as wt,b as Bt,c as R,e as It}from"./chunk-2IGJZFV7.js";import{a as ot,b as mt,c as lt,e as pt,h as dt}from"./chunk-KGOMAVQY.js";import{a as T,b as ct,c as st,e as gt,f as ft,h as ut,i as yt,k as bt,l as _t,n as Ct,o as ht,p as xt,q as Mt}from"./chunk-NFABPVPM.js";import{a as St}from"./chunk-ZCYPDZJY.js";import{a as vt}from"./chunk-WXYTA3LY.js";import"./chunk-ECBSDO4K.js";import{a as et,b as at}from"./chunk-DQWGBFJK.js";import"./chunk-MS4AQ6UA.js";import{a as nt,b as rt}from"./chunk-LB6LRJVS.js";import{f as it}from"./chunk-YBNMVR6Q.js";import{a as W,b as w,c as B}from"./chunk-AWMIQM5V.js";import{c as A}from"./chunk-FE5V2QVG.js";import"./chunk-O27SARHL.js";import"./chunk-3RK6DDJD.js";import"./chunk-SGYCFQGT.js";import"./chunk-HSUA2CKH.js";import"./chunk-TMATL23G.js";import{b as Q,g as H,h as $,ha as I,ia as X,m as G,oa as D,p as L,pa as tt,q as Z,s as Y,ta as E,ua as O,v as J,x as K}from"./chunk-FPYKYBTQ.js";import{Db as r,Eb as n,Fb as u,Gb as y,Hb as b,Jb as k,Jc as V,Kc as j,Lb as g,Mb as S,Qb as h,Rb as x,Rc as q,Sb as M,Vb as F,Wb as o,Xb as P,Ya as l,Yb as f,bb as c,db as N,dc as z,ib as v,ka as _,la as C,nb as d,ub as p}from"./chunk-NKHI3LCY.js";function Rt(t,e){t&1&&(r(0,"mat-error"),o(1,"Barangay Name is required"),n())}function Nt(t,e){if(t&1&&(r(0,"mat-option",13),o(1),n()),t&2){let i=e.$implicit;p("value",i.id),l(),P(i.cityName)}}function Ft(t,e){t&1&&(r(0,"mat-error"),o(1,"City is required"),n())}var U=class t{constructor(e,i,a,m){this.fb=e;this.dialogRef=i;this.data=a;this.cityService=m;this.isEditMode=!!a.id,this.form=this.fb.group({id:[a.id||null],barangayName:[a.barangayName||"",[]],zipCode:[a.zipCode||"",[]],cityId:[a.cityId||null,[]]})}form;isEditMode;cities=[];ngOnInit(){this.cityService.getCities().subscribe(e=>{this.cities=e})}onSubmit(){this.form.valid&&(console.log("Form submitted:",this.form.value),this.dialogRef.close(this.form.value))}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(c(J),c(ot),c(mt),c(vt))};static \u0275cmp=v({type:t,selectors:[["app-user-barangay-dialog"]],decls:25,vars:7,consts:[[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"full-width"],["matInput","","formControlName","barangayName","required",""],[4,"ngIf"],["matInput","","formControlName","zipCode"],["formControlName","cityId","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"],[3,"value"]],template:function(i,a){if(i&1&&(r(0,"div",0)(1,"h2",1),o(2),n(),r(3,"form",2),g("ngSubmit",function(){return a.onSubmit()}),r(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),o(7,"Barangay Name"),n(),u(8,"input",5),d(9,Rt,2,0,"mat-error",6),n(),r(10,"mat-form-field",4)(11,"mat-label"),o(12,"Zip Code"),n(),u(13,"input",7),n(),r(14,"mat-form-field",4)(15,"mat-label"),o(16,"City"),n(),r(17,"mat-select",8),d(18,Nt,2,2,"mat-option",9),n(),d(19,Ft,2,0,"mat-error",6),n()(),r(20,"div",10)(21,"button",11),g("click",function(){return a.onCancel()}),o(22,"Cancel"),n(),r(23,"button",12),o(24),n()()()()),i&2){let m,s;l(2),f("",a.isEditMode?"Edit":"Add"," Barangay"),l(),p("formGroup",a.form),l(6),p("ngIf",(m=a.form.get("barangayName"))==null?null:m.hasError("required")),l(9),p("ngForOf",a.cities),l(),p("ngIf",(s=a.form.get("cityId"))==null?null:s.hasError("required")),l(4),p("disabled",!a.form.valid),l(),P(a.isEditMode?"Update":"Create")}},dependencies:[q,V,j,O,E,D,I,X,tt,B,w,dt,pt,rt,nt,it,K,G,Q,H,$,Y,L,Z],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px;background:transparent!important;box-shadow:none!important}.full-width[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.dialog-actions[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end;gap:12px}  .mat-dialog-container{background:#ffffff80!important;box-shadow:0 8px 32px #0000002e;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}  .mat-form-field-appearance-fill .mat-form-field-flex,   .mat-form-field-appearance-fill .mat-form-field-infix,   .mat-form-field-appearance-fill .mat-form-field-outline,   .mat-form-field-wrapper,   .mat-form-field-flex,   .mat-form-field-infix,   .mat-input-element,   .mat-select-trigger,   .mat-select-value,   .mat-select,   input.mat-input-element,   textarea.mat-input-element{background:transparent!important;box-shadow:none!important}"]})};var zt=["dynamicComponentContainer"],Vt=()=>[5,10,25,100];function jt(t,e){t&1&&(r(0,"th",21),o(1," Id "),n())}function qt(t,e){if(t&1&&(r(0,"td",22),o(1),n()),t&2){let i=e.$implicit;l(),f(" ",i.id," ")}}function At(t,e){t&1&&(r(0,"th",21),o(1," Barangay Name "),n())}function Qt(t,e){if(t&1&&(r(0,"td",22),o(1),n()),t&2){let i=e.$implicit;l(),f(" ",i.barangayName," ")}}function Ht(t,e){t&1&&(r(0,"th",21),o(1," Zip Code "),n())}function $t(t,e){if(t&1&&(r(0,"td",22),o(1),n()),t&2){let i=e.$implicit;l(),f(" ",i.zipCode," ")}}function Gt(t,e){t&1&&(r(0,"th",21),o(1," City "),n())}function Lt(t,e){if(t&1&&(r(0,"td",22),o(1),n()),t&2){let i=e.$implicit;l(),f(" ",i.cityId," ")}}function Zt(t,e){t&1&&(r(0,"th",23),o(1," Action "),n())}function Yt(t,e){if(t&1){let i=k();r(0,"td",24)(1,"button",25),g("click",function(){let m=_(i).$implicit,s=S();return C(s.openDialog(m))}),r(2,"mat-icon"),o(3,"edit"),n()(),r(4,"button",26),g("click",function(){let m=_(i).$implicit,s=S();return C(s.deleteBarangay(m))}),r(5,"mat-icon"),o(6,"delete"),n()()()}}function Jt(t,e){t&1&&u(0,"tr",27)}function Kt(t,e){t&1&&u(0,"tr",28)}function Wt(t,e){if(t&1&&(r(0,"tr",29)(1,"td",30),o(2),n()()),t&2){S();let i=F(13);l(2),f('No data matching the filter "',i.value,'"')}}var Dt=class t{constructor(e,i,a){this.router=e;this.barangayService=i;this.dialog=a}barangays=[];displayedColumns=["barangayName","zipCode","cityId","actions"];dataSource;paginator;sort;table;container;ngOnInit(){this.loadBarangays()}loadBarangays(){this.barangayService.getBarangays().subscribe(e=>{this.dataSource=new Mt(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(e){let i=e.target.value;this.dataSource.filter=i.trim().toLocaleLowerCase()}openDialog(e){this.dialog.open(U,{data:e||{}}).afterClosed().subscribe(a=>{a&&(a.id?this.barangayService.updateBarangay(a).subscribe(()=>{this.loadBarangays()}):this.barangayService.createBarangay(a).subscribe(()=>{this.loadBarangays()}))})}deleteBarangay(e){confirm(`Delete barangay ${e.barangayName}?`)&&this.barangayService.deleteBarangay(e.id).subscribe(()=>this.loadBarangays())}static \u0275fac=function(i){return new(i||t)(c(A),c(St),c(lt))};static \u0275cmp=v({type:t,selectors:[["app-user-barangay"]],viewQuery:function(i,a){if(i&1&&(h(R,5),h(It,5),h(T,5),h(zt,5,N)),i&2){let m;x(m=M())&&(a.paginator=m.first),x(m=M())&&(a.sort=m.first),x(m=M())&&(a.table=m.first),x(m=M())&&(a.container=m.first)}},decls:35,vars:5,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",1,"load-batch-btn",3,"click"],[1,"full-width"],["matInput","","placeholder","Search barangay..",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","barangayName"],["matColumnDef","zipCode"],["matColumnDef","cityId"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of barangays",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary","matTooltip","Edit Barangay",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete Barangay",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,a){if(i&1){let m=k();r(0,"div",1)(1,"div")(2,"h1",2),o(3,"Barangays"),n(),o(4," \xA0 "),r(5,"button",3),g("click",function(){return _(m),C(a.openDialog())}),o(6,"Add Barangay"),n()(),o(7," \xA0 "),r(8,"div")(9,"mat-form-field",4)(10,"mat-label"),o(11,"Filter"),n(),r(12,"input",5,0),g("keyup",function(Et){return _(m),C(a.applyFilter(Et))}),n()()(),r(14,"div",6)(15,"table",7),y(16,8),d(17,jt,2,0,"th",9)(18,qt,2,1,"td",10),b(),y(19,11),d(20,At,2,0,"th",9)(21,Qt,2,1,"td",10),b(),y(22,12),d(23,Ht,2,0,"th",9)(24,$t,2,1,"td",10),b(),y(25,13),d(26,Gt,2,0,"th",9)(27,Lt,2,1,"td",10),b(),y(28,14),d(29,Zt,2,0,"th",15)(30,Yt,7,0,"td",16),b(),d(31,Jt,1,0,"tr",17)(32,Kt,1,0,"tr",18)(33,Wt,3,1,"tr",19),n(),u(34,"mat-paginator",20),n()()}i&2&&(l(15),p("dataSource",a.dataSource),l(16),p("matHeaderRowDef",a.displayedColumns),l(),p("matRowDefColumns",a.displayedColumns),l(2),p("pageSizeOptions",z(4,Vt)))},dependencies:[O,E,D,I,xt,T,st,yt,gt,ct,bt,ft,ut,_t,Ct,ht,at,et,R,B,w,W,Bt,wt],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px;border:1.5px solid #e0e0e0;border-radius:10px;padding:24px;background:transparent;box-shadow:none}.load-batch-btn[_ngcontent-%COMP%]{height:50px;min-width:120px;margin-left:8px;background:#4169e1!important;color:#fff!important;font-weight:600;font-size:16px;border-radius:8px;box-shadow:0 2px 8px #4169e126;transition:background .2s,box-shadow .2s,transform .1s;letter-spacing:.5px;border:none;display:flex;align-items:left;justify-content:center;padding:0 24px;margin-bottom:24px}.load-batch-btn[_ngcontent-%COMP%]:hover, .load-batch-btn[_ngcontent-%COMP%]:focus{background:#274bb5!important;box-shadow:0 4px 16px #4169e140;transform:translateY(-2px) scale(1.03)}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{background:transparent!important}.mat-elevation-z8[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important}  .mat-paginator,   .mat-paginator-container,   .mat-paginator-outer-container,   .mat-paginator-range-actions,   .mat-paginator-page-size,   .mat-paginator-page-size-label,   .mat-paginator-range-label,   .mat-paginator-navigation-previous,   .mat-paginator-navigation-next,   .mat-paginator-page-size-select,   .mat-paginator-page-size-select .mat-select-trigger,   .mat-paginator-page-size-select .mat-select-value,   .paginator-row,   div[style*=background],   .mat-mdc-paginator,   .mat-mdc-paginator-container,   .mat-mdc-paginator-range-actions{background:transparent!important;box-shadow:none!important}  .mat-paginator,   .mat-paginator-container,   .mat-paginator-outer-container,   .mat-mdc-paginator,   .mat-mdc-paginator-container{background:transparent!important;box-shadow:none!important;border:none!important}"]})};export{Dt as UserBarangayComponent};
