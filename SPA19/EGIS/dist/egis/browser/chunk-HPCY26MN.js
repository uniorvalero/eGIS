import{a as De}from"./chunk-FKZPGAO2.js";import{a as O}from"./chunk-GRYVUB4F.js";import{d as be}from"./chunk-DBLGM7RZ.js";import{a as ve,b as xe,c as Me,e as Pe,h as we}from"./chunk-V5IDTODI.js";import{b as ee}from"./chunk-LEOWTEI6.js";import"./chunk-F5X5MWHG.js";import"./chunk-MS4AQ6UA.js";import{a as _e,b as Ce,c as A,e as Se,f as ge,g as he}from"./chunk-4QXU7Q3Z.js";import{G as fe,I as ue,J as ye,e as N,f as te,g as ie,i as oe,j as ne,l as re,m as ae,o as le,p as me,r as pe,s as ce,t as se,u as de}from"./chunk-MYHFZ2D2.js";import"./chunk-3RK6DDJD.js";import{$ as w,b as H,g as G,ga as b,h as q,ka as Y,l as z,la as D,ma as E,n as J,o as K,pa as Z,q as W,ra as I,s as X,sa as T}from"./chunk-KTJ4FNCK.js";import{c as B}from"./chunk-XHFMZJAH.js";import"./chunk-IKLMD3RG.js";import{m as L,t as Q}from"./chunk-T6TR6RQX.js";import{Bb as n,Cb as o,Db as _,Eb as f,Fb as u,Hb as F,Lb as C,Mb as P,Qb as h,Rb as v,Sb as x,Va as l,Vb as U,Wb as a,Xb as $,Yb as c,_a as y,ab as k,dc as j,fb as M,ia as S,ja as g,lb as p,sb as s,w as V}from"./chunk-5MRHDFKX.js";function ke(e,t){if(e&1&&(n(0,"mat-option",16),a(1),o()),e&2){let i=t.$implicit;s("value",i.id),l(),c(" ",i.userName," ")}}function Ue(e,t){if(e&1&&(n(0,"mat-option",16),a(1),o()),e&2){let i=t.$implicit;s("value",i.name),l(),c(" ",i.name," ")}}function $e(e,t){if(e&1&&(n(0,"mat-option",16),a(1),o()),e&2){let i=t.$implicit;s("value",i.value),l(),c(" ",i.label," ")}}var R=class e{constructor(t,i,r,m){this.fb=t;this.dialogRef=i;this.data=r;this.usersService=m;this.isEditMode=!!r.propertyId,this.form=this.fb.group({taxDeclarationNo:[r.taxDeclarationNo],ownerId:[null],titleNo:[r.titleNo],classification:[this.clasificationOptions.find(d=>d.name===r.classification)?.name||""],location:[r.location],landArea:[r.landArea],propertyStatus:[r.propertyStatus??!0]}),this.loadOwner()}form;isEditMode;userOwner="owner";users=[];selectedUser=null;clasificationOptions=[{name:"Residential"},{name:"Commercial"},{name:"Industrial"},{name:"Agricultural"}];propertyStatusOptions=[{value:!0,label:"Active"},{value:!1,label:"Inactive"}];loadOwner(){this.usersService.getUserIDName(this.userOwner).subscribe(t=>{this.users=t})}loadClassification(){this.form=this.fb.group({clasificationOptions:[this.data.classification]})}onSelectedOwner(t){let i=this.users.find(r=>r.id===t);this.selectedUser=i||null,this.form.patchValue({ownerId:t})}onSubmit(){this.form.valid&&this.dialogRef.close(this.form.value)}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||e)(y(W),y(ve),y(xe),y(O))};static \u0275cmp=M({type:e,selectors:[["app-property-dialog"]],decls:41,vars:7,consts:[[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"full-width"],["matInput","","formControlName","titleNo"],["matInput","","formControlName","taxDeclarationNo"],["formControlName","ownerId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","classification"],["matInput","","formControlName","location"],["matInput","","formControlName","landArea"],["formControlName","propertyStatus"],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"],[3,"value"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"h2",1),a(2),o(),n(3,"form",2),C("ngSubmit",function(){return r.onSubmit()}),n(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),a(7,"Title No"),o(),_(8,"input",5),o(),n(9,"mat-form-field",4)(10,"mat-label"),a(11,"Tax Declaration No"),o(),_(12,"input",6),o(),n(13,"mat-form-field",4)(14,"mat-label"),a(15,"Select owner"),o(),n(16,"mat-select",7),C("selectionChange",function(d){return r.onSelectedOwner(d.value)}),p(17,ke,2,2,"mat-option",8),o()(),n(18,"mat-form-field",4)(19,"mat-label"),a(20,"Select classification"),o(),n(21,"mat-select",9),p(22,Ue,2,2,"mat-option",8),o()(),n(23,"mat-form-field",4)(24,"mat-label"),a(25,"Location"),o(),_(26,"input",10),o(),n(27,"mat-form-field",4)(28,"mat-label"),a(29,"Land Area"),o(),_(30,"input",11),o(),n(31,"mat-form-field",4)(32,"mat-label"),a(33,"Property Status"),o(),n(34,"mat-select",12),p(35,$e,2,2,"mat-option",8),o()()(),n(36,"div",13)(37,"button",14),C("click",function(){return r.onCancel()}),a(38,"Cancel"),o(),n(39,"button",15),a(40),o()()()()),i&2&&(l(2),c("",r.isEditMode?"Edit":"Add"," Property"),l(),s("formGroup",r.form),l(14),s("ngForOf",r.users),l(5),s("ngForOf",r.clasificationOptions),l(13),s("ngForOf",r.propertyStatusOptions),l(4),s("disabled",!r.form.valid),l(),$(r.isEditMode?"Update":"Create"))},dependencies:[X,z,H,G,q,J,K,Y,b,w,Q,L,E,D,ee,ye,ue,fe,T,I,we,Pe,be],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px}.full-width[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.dialog-actions[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end;gap:12px}"]})};var je=["dynamicComponentContainer"],Le=()=>[5,10,25,100];function Qe(e,t){e&1&&(n(0,"th",26),a(1,"Property ID "),o())}function Be(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.propertyId," ")}}function He(e,t){e&1&&(n(0,"th",26),a(1," Tax Declaration No "),o())}function Ge(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.taxDeclarationNo," ")}}function qe(e,t){e&1&&(n(0,"th",26),a(1," Owner ID "),o())}function ze(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.ownerId," ")}}function Je(e,t){e&1&&(n(0,"th",26),a(1," Owner Name "),o())}function Ke(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.ownerName," ")}}function We(e,t){e&1&&(n(0,"th",26),a(1," Title No "),o())}function Xe(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.titleNo," ")}}function Ye(e,t){e&1&&(n(0,"th",26),a(1," Classification "),o())}function Ze(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.classification," ")}}function et(e,t){e&1&&(n(0,"th",26),a(1," Location "),o())}function tt(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.location," ")}}function it(e,t){e&1&&(n(0,"th",26),a(1," Land Area "),o())}function ot(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.landArea," ")}}function nt(e,t){e&1&&(n(0,"th",26),a(1," Property Status "),o())}function rt(e,t){if(e&1&&(n(0,"td",27),a(1),o()),e&2){let i=t.$implicit;l(),c(" ",i.propertyStatus===!0||i.propertyStatus===1?"Active":"Inactive"," ")}}function at(e,t){e&1&&(n(0,"th",28),a(1," Action "),o())}function lt(e,t){if(e&1){let i=F();n(0,"td",29)(1,"button",30),C("click",function(){let m=S(i).$implicit,d=P();return g(d.openDialog(m))}),n(2,"mat-icon"),a(3,"edit"),o()(),n(4,"button",31),C("click",function(){let m=S(i).$implicit,d=P();return g(d.deleteProperty(m.id))}),n(5,"mat-icon"),a(6,"delete"),o()()()}}function mt(e,t){e&1&&_(0,"tr",32)}function pt(e,t){e&1&&_(0,"tr",33)}function ct(e,t){if(e&1&&(n(0,"tr",34)(1,"td",35),a(2),o()()),e&2){P();let i=U(11);l(2),c('No data matching the filter "',i.value,'"')}}var Ee=class e{constructor(t,i,r,m){this.router=t;this.usersService=i;this.propertyService=r;this.dialog=m}showSubCode=!1;selectedMasterCode;selectedDescription;displayedColumns=["taxDeclarationNo","ownerName","titleNo","classification","location","landArea","propertyStatus","actions"];dataSource;paginator;sort;table;container;ngOnInit(){this.loadProperty()}loadProperty(){this.propertyService.getAllProperties().subscribe(t=>{let i=t.map(r=>this.usersService.getUserById(r.ownerId));V(i).subscribe(r=>{t.forEach((m,d)=>{m.ownerName=r[d]?.userName||""}),this.dataSource=new de(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})})}applyFilter(t){let i=t.target.value;this.dataSource.filter=i.trim().toLocaleLowerCase()}openDialog(t){this.dialog.open(R,{data:t||{}}).afterClosed().subscribe(r=>{r&&(r.id?this.propertyService.updateProperty(r).subscribe(()=>{this.loadProperty()}):this.propertyService.createProperty(r).subscribe(()=>{this.loadProperty()}))})}deleteProperty(t){confirm("Are you sure you want to delete this property?")&&this.propertyService.deleteProperty(t).subscribe(()=>{this.loadProperty()})}static \u0275fac=function(i){return new(i||e)(y(B),y(O),y(De),y(Me))};static \u0275cmp=M({type:e,selectors:[["app-property"]],viewQuery:function(i,r){if(i&1&&(h(A,5),h(Se,5),h(N,5),h(je,5,k)),i&2){let m;v(m=x())&&(r.paginator=m.first),v(m=x())&&(r.sort=m.first),v(m=x())&&(r.table=m.first),v(m=x())&&(r.container=m.first)}},decls:48,vars:5,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",3,"click"],[1,"full-width"],["matInput","","placeholder","Search property...",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","propertyId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","taxDeclarationNo"],["matColumnDef","ownerId"],["matColumnDef","ownerName"],["matColumnDef","titleNo"],["matColumnDef","classification"],["matColumnDef","location"],["matColumnDef","landArea"],["matColumnDef","propertyStatus"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary","matTooltip","Edit Property",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete Property",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,r){if(i&1){let m=F();n(0,"div",1)(1,"div")(2,"h1",2),a(3,"Property"),o(),n(4,"button",3),C("click",function(){return S(m),g(r.openDialog())}),a(5,"Add Property"),o()(),n(6,"div")(7,"mat-form-field",4)(8,"mat-label"),a(9,"Filter"),o(),n(10,"input",5,0),C("keyup",function(Ie){return S(m),g(r.applyFilter(Ie))}),o()()(),n(12,"div",6)(13,"table",7),f(14,8),p(15,Qe,2,0,"th",9)(16,Be,2,1,"td",10),u(),f(17,11),p(18,He,2,0,"th",9)(19,Ge,2,1,"td",10),u(),f(20,12),p(21,qe,2,0,"th",9)(22,ze,2,1,"td",10),u(),f(23,13),p(24,Je,2,0,"th",9)(25,Ke,2,1,"td",10),u(),f(26,14),p(27,We,2,0,"th",9)(28,Xe,2,1,"td",10),u(),f(29,15),p(30,Ye,2,0,"th",9)(31,Ze,2,1,"td",10),u(),f(32,16),p(33,et,2,0,"th",9)(34,tt,2,1,"td",10),u(),f(35,17),p(36,it,2,0,"th",9)(37,ot,2,1,"td",10),u(),f(38,18),p(39,nt,2,0,"th",9)(40,rt,2,1,"td",10),u(),f(41,19),p(42,at,2,0,"th",20)(43,lt,7,0,"td",21),u(),p(44,mt,1,0,"tr",22)(45,pt,1,0,"tr",23)(46,ct,3,1,"tr",24),o(),_(47,"mat-paginator",25),o()()}i&2&&(l(13),s("dataSource",r.dataSource),l(31),s("matHeaderRowDef",r.displayedColumns),l(),s("matRowDefColumns",r.displayedColumns),l(2),s("pageSizeOptions",j(4,Le)))},dependencies:[b,E,D,w,se,N,ie,ae,oe,te,le,ne,re,me,pe,ce,he,ge,A,T,I,Z,Ce,_e],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}"]})};export{Ee as PropertyComponent};
