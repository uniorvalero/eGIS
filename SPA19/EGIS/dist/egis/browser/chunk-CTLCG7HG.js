import{a as we}from"./chunk-ISM27ASR.js";import"./chunk-F5X5MWHG.js";import{a as xe,b as Re,c as U,e as ve}from"./chunk-2IGJZFV7.js";import{a as ne,b as ae,c as re,e as le,h as me}from"./chunk-KGOMAVQY.js";import{a as T,b as pe,c as se,e as de,f as ce,h as fe,i as ue,k as ge,l as Me,n as be,o as _e,p as Ce,q as he}from"./chunk-NFABPVPM.js";import"./chunk-ECBSDO4K.js";import{a as te,b as oe}from"./chunk-DQWGBFJK.js";import"./chunk-MS4AQ6UA.js";import{b as ie}from"./chunk-LB6LRJVS.js";import"./chunk-YBNMVR6Q.js";import{a as X,b as S,c as y}from"./chunk-AWMIQM5V.js";import{c as Q}from"./chunk-FE5V2QVG.js";import"./chunk-O27SARHL.js";import"./chunk-3RK6DDJD.js";import"./chunk-SGYCFQGT.js";import"./chunk-HSUA2CKH.js";import"./chunk-TMATL23G.js";import{b as q,d as H,g as L,h as B,ha as D,ia as Z,m as G,oa as I,p as $,pa as ee,q as Y,s as J,ta as O,ua as E,v as K,x as W}from"./chunk-FPYKYBTQ.js";import{Db as n,Eb as a,Fb as f,Gb as R,Hb as v,Jb as P,Kc as j,Lb as d,Mb as w,Qb as _,Rb as C,Rc as z,Sb as h,Vb as F,Wb as l,Xb as V,Ya as m,Yb as u,bb as s,db as N,dc as A,ib as x,ka as M,la as b,nb as c,ub as p}from"./chunk-NKHI3LCY.js";function ke(t,o){t&1&&(n(0,"mat-error"),l(1,"Role Name is required"),a())}var k=class t{constructor(o,i,e){this.fb=o;this.dialogRef=i;this.data=e;this.isEditMode=!!e.id,this.form=this.fb.group({id:[e.id||null],roleName:[e.roleName||"",H.required]})}form;isEditMode;onSubmit(){this.form.valid&&this.dialogRef.close(this.form.value)}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(s(K),s(ne),s(ae))};static \u0275cmp=x({type:t,selectors:[["app-user-roles-dialog"]],decls:15,vars:5,consts:[[1,"container-fluid"],["mat-dialog-title",""],[1,"form-container",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"full-width"],["matInput","","formControlName","roleName","required",""],[4,"ngIf"],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","submit",3,"disabled"]],template:function(i,e){if(i&1&&(n(0,"div",0)(1,"h2",1),l(2),a(),n(3,"form",2),d("ngSubmit",function(){return e.onSubmit()}),n(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),l(7,"Role Name"),a(),f(8,"input",5),c(9,ke,2,0,"mat-error",6),a()(),n(10,"div",7)(11,"button",8),d("click",function(){return e.onCancel()}),l(12,"Cancel"),a(),n(13,"button",9),l(14),a()()()()),i&2){let r;m(2),u("",e.isEditMode?"Edit":"Add"," Role"),m(),p("formGroup",e.form),m(6),p("ngIf",(r=e.form.get("roleName"))==null?null:r.hasError("required")),m(4),p("disabled",!e.form.valid),m(),V(e.isEditMode?"Update":"Create")}},dependencies:[z,j,E,O,I,D,Z,ee,y,S,me,le,ie,W,G,q,L,B,J,$,Y],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;height:100%;padding:10px;background:transparent!important;box-shadow:none!important}.full-width[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}mat-dialog-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:10px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.dialog-actions[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end;gap:12px}  .mat-dialog-container{background:#ffffff80!important;box-shadow:0 8px 32px #0000002e;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}  .mat-form-field-appearance-fill .mat-form-field-flex,   .mat-form-field-appearance-fill .mat-form-field-infix,   .mat-form-field-appearance-fill .mat-form-field-outline,   .mat-form-field-wrapper,   .mat-form-field-flex,   .mat-form-field-infix,   .mat-input-element,   .mat-select-trigger,   .mat-select-value,   .mat-select,   input.mat-input-element,   textarea.mat-input-element{background:transparent!important;box-shadow:none!important}"]})};var Pe=["dynamicComponentContainer"],Ue=()=>[5,10,25,100];function Ne(t,o){t&1&&(n(0,"th",19),l(1," Id "),a())}function Fe(t,o){if(t&1&&(n(0,"td",20),l(1),a()),t&2){let i=o.$implicit;m(),u(" ",i.id," ")}}function Ve(t,o){t&1&&(n(0,"th",19),l(1," Role Name "),a())}function Ae(t,o){if(t&1&&(n(0,"td",20),l(1),a()),t&2){let i=o.$implicit;m(),u(" ",i.roleName," ")}}function je(t,o){t&1&&(n(0,"th",21),l(1," Action "),a())}function ze(t,o){if(t&1){let i=P();n(0,"td",22)(1,"button",23),d("click",function(){let r=M(i).$implicit,g=w();return b(g.openDialog(r))}),n(2,"mat-icon"),l(3,"edit"),a()(),n(4,"button",24),d("click",function(){let r=M(i).$implicit,g=w();return b(g.deleteRole(r))}),n(5,"mat-icon"),l(6,"delete"),a()()()}}function Qe(t,o){t&1&&f(0,"tr",25)}function qe(t,o){t&1&&f(0,"tr",26)}function He(t,o){if(t&1&&(n(0,"tr",27)(1,"td",28),l(2),a()()),t&2){w();let i=F(13);m(2),u('No data matching the filter "',i.value,'"')}}var Se=class t{constructor(o,i,e){this.router=o;this.roleService=i;this.dialog=e}roles=[];displayedColumns=["roleName","actions"];dataSource;paginator;sort;table;container;ngOnInit(){this.loadRoles()}loadRoles(){this.roleService.getRoles().subscribe(o=>{this.dataSource=new he(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(o){let i=o.target.value;this.dataSource.filter=i.trim().toLocaleLowerCase()}openDialog(o){this.dialog.open(k,{data:o||{}}).afterClosed().subscribe(e=>{e&&(e.id?this.roleService.updateRole(e).subscribe(()=>{this.loadRoles()}):this.roleService.createRole(e).subscribe(()=>{this.loadRoles()}))})}deleteRole(o){confirm(`Delete role ${o.roleName}?`)&&this.roleService.deleteRole(o.id).subscribe(()=>this.loadRoles())}static \u0275fac=function(i){return new(i||t)(s(Q),s(we),s(re))};static \u0275cmp=x({type:t,selectors:[["app-user-roles"]],viewQuery:function(i,e){if(i&1&&(_(U,5),_(ve,5),_(T,5),_(Pe,5,N)),i&2){let r;C(r=h())&&(e.paginator=r.first),C(r=h())&&(e.sort=r.first),C(r=h())&&(e.table=r.first),C(r=h())&&(e.container=r.first)}},decls:29,vars:5,consts:[["input",""],[1,"table-container"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",1,"load-batch-btn",3,"click"],[1,"full-width"],["matInput","","placeholder","Search role...",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","roleName"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","space-x-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of roles",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"space-x-2"],["mat-icon-button","","color","primary","matTooltip","Edit Role",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete Role",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,e){if(i&1){let r=P();n(0,"div",1)(1,"div")(2,"h1",2),l(3,"Roles"),a(),l(4," \xA0 "),n(5,"button",3),d("click",function(){return M(r),b(e.openDialog())}),l(6,"Add Role"),a()(),l(7," \xA0 "),n(8,"div")(9,"mat-form-field",4)(10,"mat-label"),l(11,"Filter"),a(),n(12,"input",5,0),d("keyup",function(ye){return M(r),b(e.applyFilter(ye))}),a()()(),n(14,"div",6)(15,"table",7),R(16,8),c(17,Ne,2,0,"th",9)(18,Fe,2,1,"td",10),v(),R(19,11),c(20,Ve,2,0,"th",9)(21,Ae,2,1,"td",10),v(),R(22,12),c(23,je,2,0,"th",13)(24,ze,7,0,"td",14),v(),c(25,Qe,1,0,"tr",15)(26,qe,1,0,"tr",16)(27,He,3,1,"tr",17),a(),f(28,"mat-paginator",18),a()()}i&2&&(m(15),p("dataSource",e.dataSource),m(10),p("matHeaderRowDef",e.displayedColumns),m(),p("matRowDefColumns",e.displayedColumns),m(2),p("pageSizeOptions",A(4,Ue)))},dependencies:[E,O,I,D,Ce,T,se,ue,de,pe,ge,ce,fe,Me,be,_e,oe,te,U,y,S,X,Re,xe],styles:[".table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px;border:1.5px solid #e0e0e0;border-radius:10px;padding:24px;background:transparent;box-shadow:none}.load-batch-btn[_ngcontent-%COMP%]{height:50px;min-width:120px;margin-left:8px;background:#4169e1!important;color:#fff!important;font-weight:600;font-size:16px;border-radius:8px;box-shadow:0 2px 8px #4169e126;transition:background .2s,box-shadow .2s,transform .1s;letter-spacing:.5px;border:none;display:flex;align-items:left;justify-content:center;padding:0 24px;margin-bottom:24px}.load-batch-btn[_ngcontent-%COMP%]:hover, .load-batch-btn[_ngcontent-%COMP%]:focus{background:#274bb5!important;box-shadow:0 4px 16px #4169e140;transform:translateY(-2px) scale(1.03)}  .mat-header-cell{background-color:#3f51b5;color:#fff;font-weight:700;font-size:16px;text-align:center}  .mat-header-row{height:56px}.full-width[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{background:transparent!important}.mat-elevation-z8[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important}  .mat-paginator,   .mat-paginator-container,   .mat-paginator-outer-container,   .mat-paginator-range-actions,   .mat-paginator-page-size,   .mat-paginator-page-size-label,   .mat-paginator-range-label,   .mat-paginator-navigation-previous,   .mat-paginator-navigation-next,   .mat-paginator-page-size-select,   .mat-paginator-page-size-select .mat-select-trigger,   .mat-paginator-page-size-select .mat-select-value,   .paginator-row,   div[style*=background],   .mat-mdc-paginator,   .mat-mdc-paginator-container,   .mat-mdc-paginator-range-actions{background:transparent!important;box-shadow:none!important}  .mat-paginator,   .mat-paginator-container,   .mat-paginator-outer-container,   .mat-mdc-paginator,   .mat-mdc-paginator-container{background:transparent!important;box-shadow:none!important;border:none!important}"]})};export{Se as UserRolesComponent};
